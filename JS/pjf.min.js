/**
 * PagesJaunes Javascript Framework - PJ 4.9.0.2 - footer part
 *
 * @author pagesjaunes.fr
 * @version 4.9.0.2
 *
 * up-to-date: 2014-08-06T11:12:17+02:00 by a4i_onejs | artwai.fr
 **/
;(function($,pj,undefined){if(undefined==pj)return;var jQuery=$=pj.noConflict($);if(pj.version!='4.9.0.2'){pj.console('pjh-pjf-bad-version');};(function(cn){pj[cn]={asVersion:"2.5.2",apiUrl:"//cdn.jsdelivr.net/algoliasearch/2.5.2/algoliasearch.min.js",appID:'7TM6BC4HX4',apiKey:'eef732425d0fa0361a614bf17fb33f51',apiSearchParams:{getRankingInfo:1,hitsPerPage:10,allowTyposOnNumericTokens:0,useQueryEqualsOneAttributeInRanking:0,distinct:1},isOn:function(v){return'algolia'===(v||'vintage');}}
if($.isPlainObject(window.pjAlgoliaConf)){$.extend(true,pj[cn],pjAlgoliaConf)}
if(undefined==window.AlgoliaSearch){$.getScript(pj[cn].apiUrl);}
pj.addAction('beforeInit.pjautocomplete',function(aName,$e,acOptions){var as=null,ai=null,actParams={go:false,idxName:null,asParams:$.extend({},pj[cn].apiSearchParams),parseItem:pj.nop};pj.doAction('initAC.'+cn,$e,acOptions,actParams);if(actParams.go){acOptions.url=function(term,acSuccess,acFailure){if(!ai){ai=(as||(as=new AlgoliaSearch(pj[cn].appID,pj[cn].apiKey))).initIndex(actParams.idxName);}
ai.search(term,function(success,content){var rows=[];if(success){for(var h in content.hits){actParams.parseItem(h,content.hits[h],rows);}}
acSuccess(term,rows);},actParams.asParams);};}});})('pjalgolia');;(function(cn){if(pj.pjalgolia&&pj.pjalgolia.isOn(window.TEST_AC_PJ_QUOIQUI)){pj.addAction('initAC.pjalgolia',function(aName,$e,acOptions,actParams){if($e.is('#quoiqui')){$e.data('moteurAC',pj.pjautocomplete.moteurAC.quoiQuiAlgolia);$.extend(actParams,{go:true,idxName:'QuiQuoiVintage',parseItem:function(i,alItem,acRows){var dt={result:alItem.libelle,hlResult:alItem._highlightResult.libelle.value,rang:(i+1),source:'TOP',type:'vintage',id:alItem.objectID||''};acRows.push({value:dt.result,result:dt.result,data:dt});}});$.extend(acOptions,{highlight:false,formatMatch:function(row,i,n){return''+row[0].value;},formatItem:function(data,i,n,value,term){data.rang=i;return $('<div>'+data.hlResult+'</div>').attr('title',data.result).wrap("<div></div>").parent().html();}});}});}})('pjalgolia4pj');pj.preScanCallThat('span[data-'+pj.lb.cn+'],span[data-'+pj.lb.cnold+']',function(ctx){pj.outerFind('span[data-'+pj.lb.cn+'],span[data-'+pj.lb.cnold+']',ctx).each(function(){var $e=$(this),d=pj.lb.getParams($e),attrs=d.target?{target:d.target}:{};if(!d.keepspan){$e.removeAttr('data-'+pj.lb.cn).removeAttr('data-'+pj.lb.cnold);$.each(this.attributes,function(){if(this.specified){var n=this.nodeName.toLowerCase();if(this.nodeValue||n.indexOf('data-')){attrs[this.nodeName]=this.nodeValue;}}});attrs['href']=pj.unb64(d.url,d.u8);$e.replaceWith($('<a/>').attr(attrs).append($e.html()));}});});pj.add_lib(pj.onclick={init_frwk:function(){pj.onScanCallThat('.pjprechover',function($e){$e.hover(function(){$e.prev().addClass('hover')},function(){$e.prev().removeClass('hover')})});}});pj.$doc.on('click','a[data-pjpopup],input:submit:enabled[data-pjpopup]',function(e){var $e=$(this),b=$e.is(':submit'),d=$e.pjCompParams('pjpopup',{name:'_blank',options:'',form:b?$e.closest('form'):null});window.open($e.attr('href')||'',d.name,d.options);if(d.form){var $f='string'==typeof d.form?$('#'+d.form):d.form,a=$f.attr('target');$f.attr('target',d.name).bind('aftersubmit.pj',function(){$f.attr('target',a)});(function(){if(b)
$f.trigger('aftersubmit.pj');else
$f.submit();}).delay(.2);}
if(!b){e.preventDefault();}});pj.$doc.on('click',function(e){if(window.pjBodyClickUrl&&$(e.target).is('body')){window.open(pjBodyClickUrl,'pj_campagne_pub');}});;(function(cn){function _close(quoi){if($.isWindow(quoi)){quoi.close();}else{setTimeout(function(){$(quoi).hide()},10);}};pj.add_lib(pj.close={init_frwk:function(){pj.onScanCallThat('form[data-pjclose]',function($e){$e.change(function(e){_close($e.pjCompParams('pjclose').quoi)});});}});pj.postScanCallThat('pjclose-timer',function($ct){(function(){pj.outerFind('[data-pjclose]',$ct).each(function(){var $e=$(this),d=$e.pjCompParams('pjclose');if(d.auto&&!isNaN(d.auto)){_close.delay(d.auto,d.quoi);}})}).defer();});pj.$doc.on('click','*[data-pjclose]:not(form)',function(e){var $e=$(this);if($e.is('a'))e.preventDefault();_close($e.pjCompParams('pjclose').quoi);});})('pjclose');pj.add_lib(pj.addContext={ready:0,config:[['idContext','idContext'],['idPortail','portail']],ps:{},qs:'',base_page:'',docloc:'',protocole_reg:'',isOn:function(){var pja=pj.addContext,v;if(!pja.ready){pja.ready=1;if(pja.config.length){$.each(pja.config,function(){if(undefined!=(v=eval('window.'+this[0])))pja.ps[this[1]]=v;});pja.qs=$.param(pja.ps);if(pja.qs.length){pja.base_page=document.location.protocol+'//'+document.location.hostname;pja.docloc=''+document.location;v=pja.docloc.indexOf('#');if(-1!=v){pja.docloc=pja.docloc.substring(0,v);}
pja.protocole_reg=/^[a-zA-Z]+:/i;}}}
return 0!=pja.qs.length;},init_frwk:function(){if(pj.addContext.isOn()){pj.postScanCallThat("addContext:form[action]",function($ct){pj.outerFind("form[action]",$ct).pjAddContext();});}}});$.fn.pjAddContext=function(){var pja=pj.addContext;return!pja.isOn()?this:this.not("a[href*='"+pja.qs+"'], form[action*='"+pja.qs+"']").each(function(){var $e=$(this),a=$e.is('a')?'href':'action',url=$.trim($e.attr(a)),v;if(url!=""&&url!=pja.docloc&&0!=url.indexOf("#")&&0!=url.indexOf(pj.ie_anc_pre+"#")&&0!=url.indexOf(pja.docloc+"#")&&-1==url.indexOf("#null")&&url.lastIndexOf("#")!=(url.length-1)&&(0==url.indexOf(pja.base_page)||!pja.protocole_reg.test(url))){if(v=(pj.ie&&!$e.data('ie')&&$e.is('a')&&0==$e.children().length))$e.data('ie',$e.html());$e.attr(a,pj.urlAddParams(url,pja.ps));if(v)$e.html($e.data('ie')).removeData('ie');}});};pj.$doc.on('click','a',function(e){$(this).pjAddContext()});pj.$doc.on('click','[data-pjaddfavorite]',function(e){var $e=$(this),d=$e.pjCompParams('pjaddfavorite',{url:document.location.protocol+'//'+document.location.hostname,name:'PagesJaunes'});if($e.is('a'))e.preventDefault();if(window.sidebar){window.sidebar.addPanel(d.name,d.url,"");}else if(window.external){window.external.AddFavorite(d.url,d.name);}});pj.$doc.on('click.pjaddhome','[data-pjaddhome]',function(e){var $e=$(this);if($e.is('a'))e.preventDefault();if(window.external&&document.all){document.body.style.behavior='url(#default#homepage)';document.body.setHomePage($e.pjCompParams('pjaddhome',{url:document.location.protocol+'//'+document.location.hostname}).url);}else{alert("Fonction non support\351e par le navigateur.\nCliquez sur l'ic\364ne \340 gauche de l'adresse Web ou sur l'onglet actif et glissez-le jusqu'au bouton \"Accueil\" sur la barre d'outils.");}});$.fn.pjpopinParams=function(){var d={diewithopener:1};if(this.length){d=$(this).pjCompParams('popin',d);}
return d;}
$.fn.pjPopinOpen=function(){pj.popin.show.apply($(this).get(0),arguments);return this;}
$.fn.pjPopinClose=function(){pj.popin.hide();return this;}
pj.add_lib(pj.popin={init_frwk:function(){pj.$doc.bind('DOMNodeRemoved',function(e){if($('#pjpopin').length){var $e=$(e.target),sel='.pjpopin-active',$a=$e.find(sel)[$e.is(sel)?'andSelf':'noop']();if($a.length&&$a.pjpopinParams().diewithopener)pj.popin.hide();}});pj.onScanCallThat('[data-popin]',function($e){if($e.is('option'))
$e.parents('select').change(function(e){if($e.is(':selected')){$e.pjPopinOpen();$('#pjpopin').length&&$('#pjpopin').one('beforeremove.popin',function(){pj.ie?(e.currentTarget.selectedIndex=-1):$e.prop('selected',false);});}});else
$e.click(pj.popin.show);var d=$e.pjpopinParams();if(d.autoopen){$e.pjSaveCompParams({popin:$.extend(d,{autoopen:undefined})}).pjPopinOpen();}});},show:function(e){if(e)e.preventDefault();if($('#pjpopin').length){var $a=$('.pjpopin-active'),c=($a.length&&$a.get(0)==this);pj.popin.hide();if(c)return;}
var $a=$(this),d=$a.pjpopinParams(),$popin=null,$pcont=null,$pvoile=null,_place=function(){if(!$popin)return;$popin.css({left:'50%','z-index':9500,'margin-left':(-$popin.width()/2),'margin-top':(-$popin.height()/2),'text-align':'left'});$popin.css({position:'fixed',top:'50%'});},_before=function(){var $b=$('body');$b.prepend($popin=$('<div/>').attr('id','pjpopin').css({display:'none',overflow:'auto'}).append($pcont=$('<div/>').attr('id','pjpopin-content').css('z-index','2')).bind('hide',function(e){if($popin&&$popin.length&&$popin.get(0)==e.target){pj.popin.hide();}})).prepend($pvoile=$('<div/>').attr('id','pjpopin-voile').addClass('loading').css({display:'none',position:'fixed',left:'0',width:'100%',top:'0',height:'100%','z-index':9000}));if(d.voile){if(1===d.voile){$pvoile.css('opacity',0.6);}else{$pvoile.addClass(d.voile);}}else{$pvoile.css('opacity',0.01);}
if(!d.modal)$pvoile.click(pj.popin.hide);if(d.voile||d.modal)$pvoile.fadeIn();},_complete=function(){$pvoile.removeClass("loading");if(d.ou){var p=$('#'+d.ou),of=p.offset();$popin.css({position:'absolute','z-index':9500,left:of.left+"px",top:of.top+p.height()+"px",'text-align':'left'});}else{_place();if(d.repos){(function(timer){$popin.bind('beforeremove.popin',function(){timer&&clearInterval(timer);timer=null;});})(setInterval(_place,500));}}
$popin.fadeIn();setTimeout(function(){pj.$doc.trigger('complete.popin')},100);};if(d.voile&&('string'!=$.type(d.voile)||'1'===d.voile))d.voile=1;$a.filter('[data-popin]').addClass('pjpopin-active active').end();if(d.cont){_before();var $cc=$('#'+d.cont);$popin.data('resetContent',$cc.data('reAppendTo',$cc.parent()).appendTo($pcont).show());_complete();}else if(d.ajax||d.ajax64){if(d.ajax64){d.ajax=pj.unb64(d.ajax64);d.ajax64=null;$a.pjSaveCompParams({popin:d});}
$.ajax({type:"GET",url:d.ajax,data:pj.ajaxParam,dataType:"html",beforeSend:_before,success:function(h){$pcont.html(h).pjScan()},complete:_complete});}else if(d.dtanchor){var $dt=$("a[name="+d.dtanchor+"]");if(!d.ou)d.ou=pj.getRel($dt);if($dt.length==0){pj.log.push_ERROR('pj.popin',pj.log.setEltIdentity("Ancre non trouvée pour lien popin avec dtanchor: {EltIdentity}",$a));}else if(($dt=$dt.closest("dt")).length==0){pj.log.push_ERROR('pj.popin',pj.log.setEltIdentity("L'ancre trouvée pour lien popin avec dtanchor n'est pas dans <dt>: {EltIdentity}",$a));}else{_before();$pcont.pjHtmlDtAnchor($dt);_complete();}}else{pj.log.push_ERROR('pj.popin',pj.log.setEltIdentity("lien popin sans contenu (ni cont, ni ajax, ni dtanchor): {EltIdentity}",$a));}
return;},hide:function(e){e&&e.preventDefault&&$(this).is('a')&&e.preventDefault();var $popin=$('#pjpopin'),$cc=$popin.data('resetContent');$popin.trigger('beforeremove.popin');if($cc)$cc.hide().appendTo($cc.data('reAppendTo'));$('#pjpopin-voile').add($popin).fadeOut().remove();$('.pjpopin-active').removeClass('pjpopin-active active');$('body').removeClass('pjpopin-on');},hideDefer:function(e){e&&e.preventDefault&&$(this).is('a')&&e.preventDefault();setTimeout(pj.popin.hide,200);}});pj.$doc.on('click.close_popin','#pjpopin .close',pj.popin.hideDefer);pj.add_lib(pj.accordeon={init_frwk:function(){pj.onScanCallThat("[data-pjaccordeon]",function($e){var d=$e.pjCompParams('pjaccordeon',{clon:'pjaccordeon-open'}),$cont=d.to?$("#"+d.to):$e.next();function _links(e,forcehide){if(e){forcehide=forcehide&&'hide'===e.type?false:undefined;if($e.is('a'))e.preventDefault();$(d.to?':data(pjdata.pjaccordeon.to='+d.to+')':$e).toggleClass(d.clon,forcehide);if(d.inform){$.each($.isArray(d.inform)?d.inform:[d.inform],function(i,s){if($.isArray(s))
$(s[0]).toggleClass(s[1],forcehide);else
$(s).toggleClass(d.clon,forcehide);});}}};function _play(e){_links(e);if($cont.size()){if(d.ajax&&$e.hasClass(d.clon)){$cont.addClass('loading');$.get(d.ajax,pj.ajaxParam,function(h){$cont.removeClass('loading').html(h).pjScan();});if(!d.reload){d.ajax=undefined;}}
$cont.slideToggle("fast");}};$e.click(_play);$cont.bind('hide',function(e){if($cont.is(e.target)){_links(e,1);}});if($e.hasClass(d.clon)&&d.ajax){_play();}});}});;(function(cn){pj.addCompSel(cn).add_lib(pj.ajax={init_frwk:function(){pj.onScanCallThat(pj.getCompSel(cn),function($e){var d=$e.pjCompParams(cn,{init:0,speed:0,type:'GET'});function _xcall(){$.ajax({type:d.type,url:d.url,data:$.extend({},d.data||{},pj.ajaxParam,{_pjTs:pj.now()}),dataType:"html",beforeSend:function(){$e.addClass('loading');},success:function(h){$e.html(h).pjScan();},complete:function(){$e.removeClass('loading');}});};if(d.geoparams){pj.addAction("pjinputgeoplace.afterGetPos",function(key,pos,mappyRes){d.data=$.extend(d.data||{},{latitude:pos.coords.latitude,longitude:pos.coords.longitude,adresse:mappyRes?mappyRes[0].Placemark.name:''});_xcall();});}else if(d.init){_xcall();}
if(d.speed)setInterval(_xcall,Math.round(d.speed*1000));if(d.deltascroll){var $win=$(window);$win.on('scroll.'+cn+' init.'+cn,function(e){if(($e.offset().top-d.deltascroll)<=($win.scrollTop()+$win.height())){_xcall();$win.unbind('.'+cn);}}).trigger('init.'+cn);}});}});})('pjajax');pj.$doc.on('click','[data-pjajaxlink],.pjajaxlink,.pjajaxlink-secours',function(e){var $e=$(this),d=$e.pjCompParams('pjajaxlink',{mode:'replace'},function(){return{old:1,ajax:$e.attr($e.is('.pjajaxlink')?'href':'rev'),ou:pj.getRel($e),mode:$e.is('.prepend')?'prepend':$e.is('.append')?'append':'replace'};}),$b=$("#"+d.ou);if($e.is('a'))e.preventDefault();if($b.size()&&(d.ajax||d.ajax64)){if(d.ajax64){d.ajax=pj.unb64(d.ajax64);d.ajax64=null;$e.pjSaveCompParams({pjajaxlink:d});}
$b.addClass('loading');$.ajax({type:"GET",url:d.ajax,data:pj.ajaxParam,dataType:"html"}).always(function(){$b.removeClass('loading');}).done(function(html){var $h=$(html);$b[d.mode=='prepend'?'prepend':d.mode=='append'?'append':'html']($h);$h.pjScan(true);}).fail(function(){if($.isFunction($.ajaxSettings.error))$.ajaxSettings.error.apply(this,arguments);});}else{pj.log.push_ERROR("pjajaxlink",pj.log.setEltIdentity("Container not found id="+pj.getRel($e)+" for {EltIdentity}",$e));}});pj.$doc.on("blur",':input[data-pjajaxvalidation]',function(e){var me=this,$e=$(me),d=$e.pjCompParams('pjajaxvalidation'),v=$e.val();me.setCustomValidity&&me.setCustomValidity('');$e.trigger('set.validity').trigger('testalert.validity');d.url&&(''!=v)&&$.getJSON(d.url+v,function(json){me.setCustomValidity&&me.setCustomValidity(json.valid?'':'Champ non valide');if(json.customMessage){var $a=$e.$pjalerte();if($a.data('html')){$a.hide().html($a.data('html')).pjScan().removeData('html');}
$('.customError',$a).html(json.customMessage).pjScan();}
$e.trigger('set.validity').trigger('testalert.validity');});});pj.$doc.on('click.pjamb_validerQuoi','.pjamb_validerQuoi',function(e){var $e=$(this),$d=$e.closest('#ambiguiteQuoi');e.preventDefault();if(0==$d.find(':checkbox:checked').size()){$d.find(':checkbox').prop('checked',true);}
$d.closest('form').submit();}).on('click.pjamb_modifSaisieQuoi','.pjamb_modifSaisieQuoi',function(e){var $e=$(this);e.preventDefault();$e.closest('form').find(':input.pjamb_videQuoi').val('').end().find('.alerte,.alerteAmbiguite').hide().end().find('#ambiguiteQuoi').remove().end().find('.pjamb_focusQuoi').focus().end();}).on('click.pjamb_validerOu','.pjamb_validerOu',function(e){var $e=$(this),href=$e.attr('href');e.preventDefault();if(href){var params=href.toQueryParams('&',true),$form=$e.closest('form'),$i;$.each(params,function(n,v){$i=$(':input[name='+n+']',$form);if($i.length){$i.val(v);}else{$form.append($('<input/>').attr({type:'hidden',name:n,value:v}));}});$form.submit();}}).on('click.pjamb_modifSaisieOu','.pjamb_modifSaisieOu',function(e){var $e=$(this);e.preventDefault();$e.closest('form').find(':input.pjamb_videOu').val('').end().find('.alerte,.alerteAmbiguite').hide().end().find('#choixMultiLoc').val(false).end().find('#ambiguite').remove().end().find('.pjamb_focusOu').focus().end();});pj.formvalidity={isNative:'checkValidity'in document.createElement('form'),msgKeywords:function($i,m){var v=$i.val()||'';return m.replace('{%value}',v).replace('{%valueLen}',v.length).replace('{%maxlength}',$i.attr('maxlength')||'').replace('{%min}',$i.attr('min')||'').replace('{%max}',$i.attr('max')||'').replace('{%step}',$i.attr('step')||'').replace('{%title}',$i.attr('title')||'').replace('{%placeholder}',$i.attr('placeholder')||'');}};if(!pj.formvalidity.isNative){$.extend(pj.formvalidity,{defStates:{valueMissing:false,typeMismatch:false,patternMismatch:false,tooLong:false,tooShort:false,rangeUnderflow:false,rangeOverflow:false,stepMismatch:false,customError:false,valid:true},willValidate:function($i){return $i.is(':input:not(:disabled,[readonly],[novalidate],[type="hidden"],:button,:reset,:submit)')&&0==$i.closest('fieldset[disabled]').size();},validateSelectors:':input:not(:disabled,[readonly],[novalidate],[type="hidden"],:button,:reset,:submit)',validationMessages:$.extend(true,{typeMismatch:{'default':'Valeur incorrecte.'},rangeUnderflow:'La valeur doit être inférieure ou égale à {%min}.',rangeOverflow:'La valeur doit être supérieure ou égale à {%max}.',stepMismatch:'Valeur incorrecte.',tooLong:'Le texte est trop long.',tooShort:'Le texte est trop court.',patternMismatch:'Veuillez utiliser le format requis.',valueMissing:'Veuillez remplir ce champ.',customError:''},window.l10n_validationMessages||{})});};$.fn.$pjalerte=function(){return $('#'+this.data('pjalerte'));}
pj.addCompSel('pjformvalidity',{elt:'form'}).add_lib($.extend(pj.formvalidity,{init_frwk:function(){pj.onScanCallThat(pj.getCompSel('pjformvalidity'),function($f){var opts=$f.pjCompParams('pjformvalidity',{alertonblur:0}),$l,_fv=pj.formvalidity,old=!_fv.isNative,_testFieldAlert=function(focus,submit){var $i=$(this),validity=$i.prop('validity')||{valid:true},retValid=true,$a=$i.$pjalerte().hide();if(old&&false==$i.data('validityChecked')){this.checkValidity();};if($i.prop('willValidate')&&!$i.data('placeholder-pwdinput')&&(!submit||!$i.data('pjvisiblepwd-pwdinput'))&&!validity.valid){var v,t;retValid=false;if($a.size()){if(!$a.data('html'))$a.data('html',$a.html());$.each(this.validity,function(typ,err){if(typ!='valid')$a.toggleClass(typ,err);});$a.html(_fv.msgKeywords($i,$a.data('html'))).show();var $closer=(-1!==$.inArray(t=$i.attr('type'),['radio','checkbox'])?$(':'+t+'[name="'+$i.attr('name')+'"]',this.form):$i);if($i.data('pjvisiblepwd-textinput')){$closer=$closer.add($i.data('pjvisiblepwd-textinput'));}
$closer.unbind('.onevent').bind('click.onevent keydown.onevent change.onevent'+(focus?'':' focus.onevent'),function(e){$a.bind('hide.onevent',function(){$closer.unbind('.onevent');$a.unbind('.onevent');}).hide();});}
if(focus){$i.focus();}}
return retValid;};$('fieldset',$f).pjNormalizeAttr(['disabled','novalidate']);$l=$(':input',$f).bind('invalid',function(e){e.preventDefault();}).pjNormalizeAttr(['disabled','readonly','novalidate','required']).filter('[required]').addClass('required').end().not('[required]').addClass('optional').end();if(old){(function(){$l.each(function(){var $i=$(this).data('validityChecked',false),me=$.extend(this,{willValidate:true,validity:$.extend({},_fv.defStates),setCustomValidity:function(message){message=message||'';me.customErrorMessage=message;me._pjResetValidationMessage({customError:!!message});},checkValidity:function(deadloop){if(me.willValidate=_fv.willValidate($i)){var o=me.validity,v=$i.val(),t=$i.attr('type'),$i2,r;if('radio'==t||'checkbox'==t){if(0<($i2=$(':'+t+'[name="'+$i.attr('name')+'"]',me.form)).filter('[required]').size()){o.valueMissing=1>$i2.filter(':checked').size();if(!deadloop){$i2.not(me).each(function(){if(this.checkValidity)
this.checkValidity(true);});}}}else o.valueMissing=$i.attr('required')?!v:false;o.typeMismatch=false;o.patternMismatch=!o.valueMissing&&(t=$i.attr('pattern'))&&(!$i.is('textarea'))&&(!(new RegExp('^(?:'+t+')$')).test(v));if((t=$i.attr('maxlength'))&&(t=parseInt(t))>0){if($i.is('textarea')&&v.length>t)$i.val(v=v.substr(0,t));o.tooLong=t<v.length;}else o.tooLong=false;o.rangeUnderflow=false;o.rangeOverflow=false;o.stepMismatch=false;o.customError=!!me.customErrorMessage;me._pjResetValidationMessage();}else{$.extend(me.validity,_fv.defStates);me.validationMessage='';$i.removeClass('valid invalid');}
$i.data('validityChecked',true);return me.validity.valid;},validationMessage:'',_pjResetValidationMessage:function(force){var valid=true,v,it,msgs=_fv.validationMessages;$.extend(me.validity,force||{});delete me.validity.valid;me.validationMessage=[];$.each(me.validity,function(typ,err){if(err){valid=false;me.validationMessage.push(('typeMismatch'==typ?msgs[typ][((it=($i.attr('type')||'none'))in msgs[typ])?it:'default']:('customError'==typ?err.customErrorMessage||'':msgs[typ])));}});if(me.validity.valid=valid){me.validationMessage='';$i.trigger('valid')}else{me.validationMessage=_fv.msgKeywords($i,$.trim(me.validationMessage.join("\n\n")));$i.trigger('invalid')}
$i.toggleClass('valid',valid).toggleClass('invalid',!valid);}}),_f=function(e){me.checkValidity()};$i.pjFormCtrl16i(_f,true).change(_f);if(pj.ie&&$i.attr('pattern')){var tid=null,_cleartid=function(){if(tid){clearInterval(tid);tid=null;}};$i.focus(function(e){_cleartid();tid=setInterval(_f,1000);}).blur(_cleartid);}});}).delay(0.5);}else if($.browser.opera){$l.filter('select[required]').addClass('required').each(function(){var $i=$(this);$i.change(function(){if(this.validity.valid=!(this.validity.valueMissing=!$i.val())){$i.addClass('valid').removeClass('invalid');}else{$i.removeClass('valid').addClass('invalid').trigger('invalid');}}).change();}).end();}
$f.attr('novalidate',true).find('input[data-minlength]:text,input[data-minlength]:password,textarea[data-minlength]').pjFormCtrl16i(function(){if(this.validity){var $i=$(this),l=$i.val().length;this.setCustomValidity((this.validity.tooShort=(0<l&&l<parseInt($i.data('minlength'))))?'too short':'');}},true).end().submit(function(e){var valid=true;$(':input',this).each(function(){valid=_testFieldAlert.call(this,valid,true)&&valid;});return valid;}).on("focusin focusout keyup click paste invalid valid set.validity",':input[id]',function(e){if(this.validity){if(e.type=='paste'){e.type='set.validity';arguments.callee.bind(this).defer(e);}else{$('label[for="'+$(this).attr('id')+'"]').toggleClass('valid',this.validity.valid).toggleClass('invalid',!this.validity.valid)}}});$l.trigger('set.validity');if(opts.alertonblur){$f.on('focusout testalert.validity',':input',function(e){if(!$(this).data('placeholder-pwdinput')&&'pjvisiblepwd'!=e.pjto){_testFieldAlert.call(this);}});}});}}));;(function(cn){var
cnSel='input['+cn+'],textarea['+cn+']',_clear=function(e){var $i=$(this),id=$i.data('id');if($i.data(cn+'-native')){$i.removeClass(cn);}else if($i.noplaceholderval()===$i.attr(cn)&&$i.is('.'+cn)){var $iPwd=$i.data(cn+'-pwdinput');if($iPwd){$i.hide().removeAttr('id');$iPwd.attr('id',id);if($iPwd.is("[data-pjvisiblepwd]")){$iPwd.trigger('set.pjvisiblepwd');}else{$iPwd.show().focus();}}else{$i.noplaceholderval('').removeClass(cn);}}},_set=function(e){var $i=$(this),id=$i.data('id');if($i.data(cn+'-native')){$i.toggleClass(cn,''===$i.noplaceholderval());}else if($i.noplaceholderval()===''){if($i.is(':password')){if(!$i.data(cn+'-textinput')){var $iph;try{$iph=$i.clone().attr({type:'text'});}catch(e){var attrs={},rinlinejQuery=/^jQuery\d+$/;$.each(this.attributes,function(i,attr){if(attr.specified&&!rinlinejQuery.test(attr.name)){attrs[attr.name]=attr.value;}});attrs.type='text';$iph=$('<input/>').attr(attrs);}
$iph.removeAttr('name').data(cn+'-pwdinput',$i).data(cn+'-id',id).bind('focus.'+cn,_clear);$i.data(cn+'-textinput',$iph).data(cn+'-id',id).before($iph);}
$i=$i.removeAttr('id').hide().data(cn+'-textinput').attr('id',id).show();}
$i.addClass(cn).noplaceholderval($i.attr(cn));}else{}};$.extend($.support,{pjPlaceholderInput:cn in document.createElement('input'),pjPlaceholderTextarea:cn in document.createElement('textarea')});pj.preScanCallThat(cnSel,function(ctx){$(cnSel,ctx).each(function(){if(undefined===$.fn.noplaceholderval){$.fn.noplaceholderval=$.fn.val;$.fn.val=(function(core){return function(v){if(v===undefined&&this.is('['+cn+'].'+cn))return'';if(v===''){return this.not('['+cn+'].'+cn).noplaceholderval(v).end();}
if(undefined!==v)this.removeClass(cn);return core.apply(this,arguments);}}($.fn.noplaceholderval));}
var $i=$(this);$i.data('id',$i.attr('id')||$i.data('id')).data(cn+'-native',($.support.pjPlaceholderTextarea&&$i.is('textarea'))||($.support.pjPlaceholderInput&&$i.is('input'))).bind('focus.'+cn+' clear.'+cn,_clear).bind('blur.'+cn+' set.'+cn,_set).not(':focus').trigger('set.'+cn).end();});pj.outerFind('form',ctx).submit(function(e){if(!e.isDefaultPrevented()){$('.'+cn,this).trigger('clear.'+cn);}}).bind('aftersubmit.pj',function(e){$('.'+cn,this).trigger('set.'+cn);});});$(window).bind('beforeunload.'+cn,function(){$('.'+cn)[$.fn.noplaceholderval?'noplaceholderval':'val']('');});})('placeholder');$.fn.pjFormx=function(options){var $f=$(this),options=$.extend(false,{},options||{});options.url=pj.form.formatxurl($f,options.url);if(!options.type){options.type=$f.attr('method')||'';if(options.type.blank())options.type='get';}
if(pj.ie||$.browser.safari){options.contentType="application/x-www-form-urlencoded; charset=UTF-8";}
var params=options.data;options.data=$.extend(false,{pj4valid:true},pj.ajaxParam);$.each($f.serializeArray(),function(i,f){if(f.name in options.data){if(!$.isArray(options.data[f.name]))options.data[f.name]=[options.data[f.name]];options.data[f.name].push(f.value);}else{options.data[f.name]=f.value;}});if(params){if(typeof params=="string")params=params.toQueryParams();$.extend(options.data,params);}
return $.ajax(options);}
$.fn.pjFormCtrl16i=function(f,ic){return this
[ic?'each':'noop'](function(){f.bind(this).defer()}).bind('keyup ctrl16i.pjform',f).bind('paste',function(e){f.bind(this).defer(e)});}
$.fn.pjForm=function(compname){var f;return(f=(this.attr('form')||this.pjCompParams(compname).form))?$('#'+f):this.closest('form');}
pj.addCompSel('pjgethtml',{elt:':input'}).addCompSel('pjinputswap').addCompSel('pjsetfocus').addCompSel('pjinputfocus',{elt:':input'}).add_lib(pj.form={init_frwk:function(){$.extend($.support,{'pjMaxlengthTextarea':'maxlength'in document.createElement('textarea')});pj.onScanCallThat('form[data-pjformxvalid]',function($e){$e.submit(pj.form.submix).find(':submit,:image').click(function(e){var el=e.currentTarget,s={$el:$(el),d:{}},n=s.$el.attr('name');if(n){s.d[n]=s.$el.val();}
$e.data('submit',s);});});pj.onScanCallThat('textarea[maxlength],textarea[class*="pjmaxlength_"]',function($e){var ml=$e.attr('maxlength');if(!ml){if(ml=$e.pjClassSuffixe('pjmaxlength_',"\\d+")){$e.attr('maxlength',ml);}}
if(ml&&!$.support.pjMaxlengthTextarea){$e.pjFormCtrl16i(function(){var v=$e.val();if(v.length>ml){$e.val(v.substr(0,ml));}},true);}});pj.onScanCallThat("label.pjnbcars",function($e){$('#'+$e.attr('for')).pjFormCtrl16i(function(){$e.html($(this).val().length)},true);});pj.onScanCallThat('select[data-pjsubmitter],input[data-pjsubmitter][data-pjdateinput]',function($e){var ons=['change','click'],d=$e.pjCompParams('pjsubmitter',{on:ons[0]});$e[$.inArray(d.on,ons)>=0?d.on:'noop'](function(e){var $f=d.form?$(d.form):$e.closest('form'),df=$f.pjCompParams('pjformxvalid');if($e.is('a'))e.preventDefault();if(d.dispatch){var $i=$f.find(":input[name='dispatch']").filter(':text,input[type=hidden],textarea');if(0==$i.size()){$f.append($('<input/>').attr({type:'hidden',name:'dispatch',value:d.dispatch}));}else{$i.val(d.dispatch);}}
if(d.force){function _testX(to){if(to==d.force&&to!=df.type){if(!df.type){$f.submit(pj.form.submix);}
df.type=to
$f.pjSaveCompParams({pjformxvalid:df});return true;}
return to==d.force&&to==df.type;}
if(!_testX('x')&&!_testX('y')&&('direct'==d.force&&('x'==df.type||'y'==df.type))){df.type=null;$f.pjSaveCompParams({pjformxvalid:df});$f.unbind('submit',pj.form.submix);}}
$f.submit();});});pj.onScanCallThat(pj.getCompSel('pjinputfocus'),function($e){var cn='pjinputfocus',d=$e.pjCompParams(cn,{quoi:'#focus_'+$e.attr('id'),keyhide:0,tempohide:0,alert:0},function(){return{old:1,keyhide:$e.is('.pjinputfocus_saisie'),tempohide:$e.is('.pjinputfocus_tempo')?5:0}}),$m=$(d.quoi);if($m.size()){var _rf=function(e){$m.removeClass('focusin')
if(d.alert){$e.unbind('.'+cn);if($e.is(':radio')){$('input:radio[name="'+$e.attr('name')+'"]',$e.closest('form')).unbind('.'+cn)}}};$e.bind('focus.'+cn,function(e){$m.addClass('focusin');if(d.tempohide)_rf.delay(d.tempohide)});if(!d.alert)$e.bind('blur.'+cn,_rf);if(d.keyhide||d.alert){$e.bind('change.'+cn+' keydown.'+cn+' paste.'+cn,_rf);}}});pj.onScanCallThat(pj.getCompSel('pjgethtml'),function($e){var d=$e.pjCompParams('pjgethtml'),x;if(d.sel){var w=eval(d.win)||window;if(w.pj){if((x=w.pj.$(d.sel)).size()){$e.val((x=x.get(0)).outerHTML?x.outerHTML:$('<div/>').append(x.cloneNode(false)).html().replace(/<\//g,x.innerHTML+"</"))}}}});},formatxurl:function($form,url){var md=$form.pjCompParams('pjformxvalid');if(!url){url=$form.attr('action')||'';if(url.blank())url=location.href;}
if('y'==$form.pjCompParams('pjformxvalid').type){var lastSl=url.lastIndexOf('/');url=url.substring(0,lastSl+1)+'validation/'+url.substring(lastSl+1);}
return url;},submix:function(e){if(!e.isDefaultPrevented()){var $form=$(e.currentTarget).addClass('loading'),md=$form.pjCompParams('pjformxvalid'),$nc,sd=$form.data('submit'),$va=null,_allways=function(){var pif=$form.data('pjform_pif');$form.removeClass('loading');if(pif){pif.target?$form.attr('target',pif.target):$form.removeAttr('target');$form.attr('action',pif.action);$('input[name="pjiframe"],input[name="pj4valid"]',$form).remove();}
if($va){pj.popin.hide();$va.remove();$va=null;}},_done=function(html){if(0===html.indexOf("goodx")){var seo="goodxSEO:";if(0===html.indexOf(seo)){$form.attr("action",html.substr(seo.length));}
$form.unbind('submit',pj.form.submix);if(sd){sd.$el.addClass('pjnostat').click();$form.trigger('aftersubmit.pj');}
else $form.submit();}else{(md.to?$('#'+md.to):$form).replaceWith($nc=$(html));$nc.pjScan(true);}};if(md.waitpopin){var po=$.extend({wait:0,voile:0,modal:1},md.waitpopin),$va=$('<span style="display:none"/>').pjSaveCompParams({popin:po});setTimeout(function(){if($va)pj.popin.show.call($va)},1000*po.wait);}
if("multipart/form-data"==$form.prop('enctype')){var pif={name:'pjformxvalid-iframe',target:$form.attr('target'),action:$form.attr('action')};$form.append($('<input name="pjiframe" value="true" type="hidden" />')).append($('<input name="pj4valid" value="true" type="hidden" />')).append($('<iframe name="'+pif.name+'" id="'+pif.name+'" style="width:0;height:0;border:0px solid #fff;"></iframe>').bind('load',function(){var $this=$(this),$c=$this.contents();if('about:blank'!=$c.get(0).location.href){_allways();_done($c.find('html body').html());}})).data('pjform_pif',pif).prop('target',pif.name).attr('action',pj.form.formatxurl($form));}else{e.preventDefault();$form.pjFormx({data:sd?sd.d:null}).always(_allways).done(_done);}}},request:function(form,options){return $(form).pjFormx(options);}});pj.preScanCallThat('pjsetfocus-onload',function(ctx){pj.outerFind(':input.pjsetfocus',ctx).removeClass('pjsetfocus').filter(':last').focus();});pj.$doc.on('click','*[data-pjsubmitter]:not(select):not([data-pjdateinput])',function(e){var $e=$(this),d=$e.pjCompParams('pjsubmitter'),$f=d.form?$(d.form):$e.closest('form'),df=$f.pjCompParams('pjformxvalid');if($e.is('a'))e.preventDefault();if(d.dispatch){var $i=$f.find(':input[name="dispatch"]').filter(':text,input[type="hidden"],textarea');if(0==$i.size()){$f.append($('<input/>').attr({type:'hidden',name:'dispatch',value:d.dispatch}));}else{$i.val(d.dispatch);}}
if(d.force){function _testX(to){if(to==d.force&&to!=df.type){if(!df.type){$f.submit(pj.form.submix);}
df.type=to;$f.pjSaveCompParams({pjformxvalid:df});return true;}
return to==d.force&&to==df.type;}
if(!_testX('x')&&!_testX('y')&&('direct'==d.force&&('x'==df.type||'y'==df.type))){df.type=null;$f.pjSaveCompParams({pjformxvalid:df});$f.unbind('submit',pj.form.submix);}}
if($e.data('iefromimglabel')){if(!$e.data("ie-56792")){$e.data("ie-56792",1).change(function(){$f.submit();});}}
else{$f.submit();}});pj.$doc.on('click',pj.getCompSel('pjinputswap'),function(e){var $e=$(this),d=$e.pjCompParams('pjinputswap',{from:'undefined',to:'undefined'}),v=$(d.from).val();if($e.is('a'))e.preventDefault();$(d.from).val($(d.to).val());$(d.to).val(v);});pj.$doc.on('click',pj.getCompSel('pjsetfocus'),function(e){var $e=$(this),d=$e.pjCompParams('pjsetfocus',{ou:'undefined',vider:0});$ou=$(d.ou);if($e.is('a'))e.preventDefault();d.vider&&$ou.val('');if($ou.is(':visible')){$ou.focus();}else{var key='granpa.pjsetfocus';if(!$ou.data(key)){$ou.data(key,$ou.parentsUntil(':visible').last().bind('show.pjsetfocus',function(){if($ou.is(':visible')){$ou.data(key).unbind('show.pjsetfocus');$ou.removeData(key).focus();}}));}}});DateInput=(function($){function parseISO8601(s){var re=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:.(\d+))?(Z|[+-]\d{2})(?::(\d{2}))?/,d=s.match(re);if(!d)return null;for(var i in d)
d[i]=~~d[i];return new Date(Date.UTC(d[1],d[2]-1,d[3],d[4],d[5],d[6],d[7])+(d[8]*60+d[9])*60000);}
function _ajustOptionDay(day){switch($.type(day)){case'string':if('today'===day){day=new Date();}else{day=day.split('-');day=new Date(parseInt(day[0]),parseInt(day[1]||'1')-1,parseInt(day[2]||'1'));}
break;case'date':break;case'number':day=0<day?new Date(day):null;break;default:day=null;break;}
day&&day.setHours(12,0,0,0);return day;}
function DateInput(el,opts){if(typeof(opts)!="object")opts={};$.extend(this,DateInput.DEFAULT_OPTS,opts);this.from_day=_ajustOptionDay(this.from_day);this.to_day=_ajustOptionDay(this.to_day);this.input=$(el).data('dateinput_api',this);this.btnsel='button'==this.showon||'both'==this.showon?$(this.btnsel):null;if(this.btnsel&&!this.btnsel.size())this.btnsel=null;if(this.btnsel)this.btnsel.data('$dateinput',this.input);this.bindMethodsToObj("show","hide","hideIfClickOutside","keydownHandler","selectDate");this.build();this.selectDate();this.hide();};DateInput.DEFAULT_OPTS={month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],short_month_names:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],short_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],start_of_week:1,month_year_distinct:1,classe_bis:'',from_day:'today',to_day:null};DateInput.prototype={build:function(){var monthNav=$('<p class="month_nav">'+'<span class="button prev" title="[Page-Up]">&#171;</span>'+' <span class="month_name"></span> '+'<span class="button next" title="[Page-Down]">&#187;</span>'+'</p>');this.monthNameSpan=$(".month_name",monthNav);this.$btnPrevMonth=$('.prev',monthNav).data('action',this.bindToObj(function(){this.moveMonthBy(-1);}));this.$btnNextMonth=$('.next',monthNav).data('action',this.bindToObj(function(){this.moveMonthBy(1);}));var yearNav='';this.$btnPrevYear=null;this.$btnNextYear=null;if(this.month_year_distinct){var yearNav=$('<p class="year_nav">'+'<span class="button prev" title="[Ctrl+Page-Up]">&#171;</span>'+' <span class="year_name"></span> '+'<span class="button next" title="[Ctrl+Page-Down]">&#187;</span>'+'</p>');this.$btnPrevYear=$(".prev",yearNav).data('action',this.bindToObj(function(){this.moveMonthBy(-12);}));this.$btnNextYear=$(".next",yearNav).data('action',this.bindToObj(function(){this.moveMonthBy(12);}));}else{this.monthNameSpan.after($(' <span class="year_name"></span> '));}
var nav=$('<div class="nav"></div>').append(monthNav,yearNav);this.yearNameSpan=$(".year_name",nav);var tableShell="<table><thead><tr>";$(this.adjustDays(this.short_day_names)).each(function(){tableShell+="<th>"+this+"</th>";});tableShell+="</tr></thead><tbody></tbody></table>";this.dateSelector=this.rootLayers=$('<div class="date_selector '+this.classe_bis+'"></div>').append(nav,tableShell).appendTo("body");if($.browser.msie&&$.browser.version<7){this.ieframe=$('<iframe class="date_selector_ieframe" frameborder="0" src="#"></iframe>').insertBefore(this.dateSelector);this.rootLayers=this.rootLayers.add(this.ieframe);$(".button",nav).mouseover(function(){$(this).addClass("hover")});$(".button",nav).mouseout(function(){$(this).removeClass("hover")});};this.tbody=$("tbody",this.dateSelector);this.input.change(this.bindToObj(function(){this.selectDate();}));this.selectDate();var inst=this,timer63639=setInterval(function(){if(!$('body').find(inst.input).size()){clearInterval(timer63639);inst.input.remove();inst.rootLayers.remove();}},3000);},selectMonth:function(date){var newMonth=new Date(date.getFullYear(),date.getMonth(),1);if(!this.currentMonth||!(this.currentMonth.getFullYear()==newMonth.getFullYear()&&this.currentMonth.getMonth()==newMonth.getMonth())){this.currentMonth=newMonth;var rangeStart=this.rangeStart(date),rangeEnd=this.rangeEnd(date);var numDays=this.daysBetween(rangeStart,rangeEnd);var dayCells="";for(var i=0;i<=numDays;i++){var currentDay=new Date(rangeStart.getFullYear(),rangeStart.getMonth(),rangeStart.getDate()+i,12,00);if(this.isFirstDayOfWeek(currentDay))dayCells+="<tr>";if(currentDay.getMonth()==date.getMonth()&&(!this.from_day||(currentDay.getTime()>=this.from_day.getTime()))&&(!this.to_day||(currentDay.getTime()<=this.to_day.getTime()))){dayCells+='<td class="selectable_day" date="'+this.dateToString(currentDay)+'">'+currentDay.getDate()+'</td>';}else{dayCells+='<td class="unselected_month" date="'+this.dateToString(currentDay)+'">'+currentDay.getDate()+'</td>';};if(this.isLastDayOfWeek(currentDay))dayCells+="</tr>";};this.tbody.empty().append(dayCells);this.monthNameSpan.empty().append(this.monthName(date));this.yearNameSpan.empty().append(this.currentMonth.getFullYear());$(".selectable_day",this.tbody).click(this.bindToObj(function(event){this.changeInput($(event.target).attr("date"));}));$("td[date='"+this.dateToString(new Date())+"']",this.tbody).addClass("today");$("td.selectable_day",this.tbody).mouseover(function(){$(this).addClass("hover")});$("td.selectable_day",this.tbody).mouseout(function(){$(this).removeClass("hover")});};$('.selected',this.tbody).removeClass("selected");$('td[date="'+this.selectedDateString+'"]',this.tbody).addClass("selected");var
prevYear=!this.from_day||newMonth.getFullYear()>this.from_day.getFullYear(),prevMonth=prevYear||(newMonth.getFullYear()==this.from_day.getFullYear()&&newMonth.getMonth()>this.from_day.getMonth()),nextYear=!this.to_day||newMonth.getFullYear()<this.to_day.getFullYear(),nextMonth=nextYear||(newMonth.getFullYear()==this.to_day.getFullYear()&&newMonth.getMonth()<this.to_day.getMonth());this.$btnPrevMonth.unbind('click',this.$btnPrevMonth.data('action')).toggleClass('disabled',!prevMonth);if(prevMonth)this.$btnPrevMonth.one('click',this.$btnPrevMonth.data('action'));if(this.$btnPrevYear){this.$btnPrevYear.unbind('click',this.$btnPrevYear.data('action')).toggleClass('disabled',!prevYear);if(prevYear)this.$btnPrevYear.one('click',this.$btnPrevYear.data('action'));}
this.$btnNextMonth.unbind('click',this.$btnNextMonth.data('action')).toggleClass('disabled',!nextMonth);if(nextMonth)this.$btnNextMonth.one('click',this.$btnNextMonth.data('action'));if(this.$btnNextYear){this.$btnNextYear.unbind('click',this.$btnNextYear.data('action')).toggleClass('disabled',!nextYear);if(nextYear)this.$btnNextYear.one('click',this.$btnNextYear.data('action'));}},selectDate:function(date){if(typeof(date)=="undefined"){date=this.stringToDate(this.input.val());};if(!date)date=new Date();this.selectedDate=date;this.selectedDateString=this.dateToString(this.selectedDate);this.selectMonth(this.selectedDate);},changeInput:function(dateString){this.input.val(dateString).change();this.hide();},show:function(e){if(this.input.prop('disabled'))return;this.rootLayers.css("display","block");$([window,document.body]).click(this.hideIfClickOutside);if('focus'==this.showon||'both'==this.showon){this.input.unbind("focus",this.show).click()}
if(this.btnsel){this.btnsel.unbind("click",this.show).click(this.hide);if(e&&this.btnsel.is('a')){e.preventDefault();}}
$(document.body).keydown(this.keydownHandler);this.setPosition();},hide:function(e){this.rootLayers.css("display","none");$([window,document.body]).unbind("click",this.hideIfClickOutside);if('focus'==this.showon||'both'==this.showon)this.input.focus(this.show);if(this.btnsel){this.btnsel.unbind("click",this.hide).click(this.show);if(e&&this.btnsel.is('a')){e.preventDefault();}}
$(document.body).unbind("keydown",this.keydownHandler);},hideIfClickOutside:function(event){var outbtn=this.btnsel?-1==$.inArray(event.target,this.btnsel||[])&&0==this.btnsel.has(event.target).size():true;if(event.target!=this.input[0]&&outbtn&&!this.insideSelector(event)){this.hide();};},insideSelector:function(event){var offset=this.dateSelector.position();offset.right=offset.left+this.dateSelector.outerWidth();offset.bottom=offset.top+this.dateSelector.outerHeight();return event.pageY<offset.bottom&&event.pageY>offset.top&&event.pageX<offset.right&&event.pageX>offset.left;},keydownHandler:function(event){switch(event.keyCode)
{case 9:case 27:this.hide();return;break;case 13:this.changeInput(this.selectedDateString);break;case 33:this.moveDateMonthBy(event.ctrlKey?-12:-1);break;case 34:this.moveDateMonthBy(event.ctrlKey?12:1);break;case 38:this.moveDateBy(-7);break;case 40:this.moveDateBy(7);break;case 37:this.moveDateBy(-1);break;case 39:this.moveDateBy(1);break;default:return;}
event.preventDefault();},stringToDate:function(string){var matches;if(matches=string.match(/^(\d{1,2}) ([^\s]+) (\d{4,4})$/)){return new Date(matches[3],this.shortMonthNum(matches[2]),matches[1],12,00);}else{return null;};},dateToString:function(date){return date.getDate()+" "+this.short_month_names[date.getMonth()]+" "+date.getFullYear();},setPosition:function(){var offset=this.input.offset();this.rootLayers.css({top:offset.top+this.input.outerHeight(),left:offset.left});if(this.ieframe){this.ieframe.css({width:this.dateSelector.outerWidth(),height:this.dateSelector.outerHeight()});};},moveDateBy:function(amount){var newDate=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()+amount);this.selectDate(newDate);},moveDateMonthBy:function(amount){var newDate=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+amount,this.selectedDate.getDate());if(newDate.getMonth()==this.selectedDate.getMonth()+amount+1){newDate.setDate(0);};this.selectDate(newDate);},moveMonthBy:function(amount){var newMonth=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+amount,this.currentMonth.getDate());this.selectMonth(newMonth);},monthName:function(date){return this.month_names[date.getMonth()];},bindToObj:function(fn){var self=this;return function(){return fn.apply(self,arguments)};},bindMethodsToObj:function(){for(var i=0;i<arguments.length;i++){this[arguments[i]]=this.bindToObj(this[arguments[i]]);};},indexFor:function(array,value){for(var i=0;i<array.length;i++){if(value==array[i])return i;};},monthNum:function(month_name){return this.indexFor(this.month_names,month_name);},shortMonthNum:function(month_name){return this.indexFor(this.short_month_names,month_name);},shortDayNum:function(day_name){return this.indexFor(this.short_day_names,day_name);},daysBetween:function(start,end){start=Date.UTC(start.getFullYear(),start.getMonth(),start.getDate());end=Date.UTC(end.getFullYear(),end.getMonth(),end.getDate());return(end-start)/86400000;},changeDayTo:function(dayOfWeek,date,direction){var difference=direction*(Math.abs(date.getDay()-dayOfWeek-(direction*7))%7);return new Date(date.getFullYear(),date.getMonth(),date.getDate()+difference);},rangeStart:function(date){return this.changeDayTo(this.start_of_week,new Date(date.getFullYear(),date.getMonth()),-1);},rangeEnd:function(date){return this.changeDayTo((this.start_of_week-1)%7,new Date(date.getFullYear(),date.getMonth()+1,0),1);},isFirstDayOfWeek:function(date){return date.getDay()==this.start_of_week;},isLastDayOfWeek:function(date){return date.getDay()==(this.start_of_week-1)%7;},adjustDays:function(days){var newDays=[];for(var i=0;i<days.length;i++){newDays[i]=days[(i+this.start_of_week)%7];};return newDays;}};$.fn.date_input=function(opts){return this.each(function(){if(!$(this).data('dateinput_api'))new DateInput(this,opts);});};$.date_input={initialize:function(opts){$("input.date_input").date_input(opts);}};return DateInput;})(jQuery);pj.add_lib({init_frwk:function(){pj.onScanCallThat(pj.addCompSel('pjdateinput',{elt:'input:text',andGet:1}),function($e){if(!DateInput.DEFAULT_OPTS.PJ_INIT){$.extend(DateInput.DEFAULT_OPTS,{PJ_INIT:true,showon:'focus',month_names:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],short_month_names:["Jan","F\xe9v","Mar","Avr","Mai","Juin","Juil","Ao\xfb","Sep","Oct","Nov","D\xe9c"],short_day_names:["D","L","M","M","J","V","S"],stringToDate:function(string){var matches=string.match(/^(\d{2,2})\/(\d{2,2})\/(\d{4,4})$/);return matches?new Date(matches[3],matches[2]-1,matches[1]):null;},dateToString:function(d){var m=d.getMonth()+1,j=d.getDate();return(j<10?'0'+j:j)+"\/"+(m<10?'0'+m:m)+"\/"+d.getFullYear();}});}
$e.date_input($e.pjCompParams('pjdateinput'));});}});;(function(cn){pj.add_lib({init_frwk:function(){pj.onScanCallThat('input[data-'+cn+']:text',function($e){$e.bind("blur."+cn+" init."+cn,function(e){$e.val()||$e.val($e.data(cn));}).trigger("init."+cn);});}});})('pjdefaultvalue');;(function(cname){if(window.localStorage&&window.JSON&&JSON.stringify){var
_options={max_mem:50,max_mem_pro:70,max_brief:3,ttl:60,off:0,gest_max_first:30,gest_max_next:60,gest_max_by_search:21,gest_url_get_one:null,gest_url_get_pro:null,gest_more_results:cname+'_more_results',disable_info:cname+'_disable_info',enable_info:cname+'_enable_info',_:0},_emptyLSD={uid:1,t:[]},_lsd=_emptyLSD,_canSavePro=false;function _save(pocUpdate){pocUpdate=!!pocUpdate;localStorage.setItem(cname,JSON.stringify(_lsd));$('body').toggleClass(cname+'_empty',0==_lsd.t.length).trigger(cname+'_saved');}
function _purgeTTL(){var s=false,dl=new Date();dl.setDate(dl.getDate()-_options.ttl);dl.setHours(0,0,0,0);dl=dl.getTime();for(var i=_lsd.t.length-1;i>=0;i--){if(_lsd.t[i].d>=dl)break;_lsd.t.splice(i,1);s=true;}
while(_lsd.t.length>_options.max_mem){_lsd.t.pop();s=true;}
s&&_save();}
function _addPro($e,attrData){if(_canSavePro&&_lsd.t.length){var cur=_lsd.t[0],d=$e.data(attrData),p=null;if(d&&''!=d){if(undefined==cur.pro){cur.pro=[];}
for(var i in cur.pro){p=cur.pro[i];if(p.d===d||($.isPlainObject(d)&&$.isPlainObject(p.d)&&d.id===p.d.id)){cur.pro.splice(i,1);break;}
p=null;}
if(null==p){p={id:_lsd.uid++,d:d};}
cur.pro.unshift(p);while(cur.pro.length>_options.max_mem_pro){cur.pro.pop()}
_save();}}
$e.removeAttr('data-'+attrData);}
pj.add_lib(pj.myhistosearch={init_frwk:function(){_options=$.extend(_options,$.isPlainObject(window.pjmyhistosearch_options)?window.pjmyhistosearch_options:{},{user_off:localStorage.getItem(cname+'_off')});pj.$doc.on('click.'+cname+'_clear','[data-'+cname+'_clear]',function(e){var $e=$(this);if($e.is('a'))e.preventDefault();_lsd=_emptyLSD;_save();}).on('click.'+cname+'_disable','[data-'+cname+'_disable]',function(e){var $e=$(this)
d=$.extend({info:cname+'_disable_info'},$e.data(cname+'_disable'));if($e.is('a'))e.preventDefault();_options.user_off=1;localStorage.setItem(cname+'_off',1);_lsd=_emptyLSD;localStorage.removeItem(cname);$('body').addClass(cname+'_off').removeClass(cname+'_on').addClass(cname+'_empty').trigger(cname+'_saved');$('#'+_options.disable_info).show();$('#'+_options.enable_info).hide();}).on('click.'+cname+'_enable','[data-'+cname+'_enable]',function(e){var $e=$(this);if($e.is('a'))e.preventDefault();_options.user_off=0;localStorage.removeItem(cname+'_off');$('body').addClass(cname+'_on').removeClass(cname+'_off').addClass(cname+'_empty').trigger(cname+'_saved');$('#'+_options.enable_info).show();$('#'+_options.disable_info).hide();}).on('click.'+cname+'_proclic','[data-'+cname+'_proclic]',function(e){_addPro($(this),cname+'_proclic');});$('body').bind(cname+'_saved',function(){$('[data-'+cname+'_clear]').prop('disabled',0==_lsd.t.length||_options.off||_options.user_off);});if(_options.off||_options.user_off){localStorage.removeItem(cname);$('body').addClass(cname+'_off').addClass(cname+'_empty').trigger(cname+'_saved');return;}
$('body').addClass(cname+'_on');try{_lsd=$.parseJSON(localStorage.getItem(cname))}catch(e){}
_lsd=_lsd||_emptyLSD;if(!$.isPlainObject(_lsd)||!$.isNumeric(_lsd.uid)||!$.isArray(_lsd.t)){_lsd=_emptyLSD;}
_purgeTTL();pj.onScanCallThat('[data-'+cname+'_store]',function($e){var d=$e.data(cname+'_store'),cur=null,today;if((d.q||d.o)&&d.u){today=new Date();today.setHours(0,0,0,0);for(var i in _lsd.t){cur=_lsd.t[i];if(cur.d<today){cur=null;break;}
if(cur.q===d.q&&cur.o===d.o){_lsd.t.splice(i,1);cur.u=d.u;cur.d=pj.now();break;}
cur=null;}
if(null==cur){cur={id:_lsd.uid++,q:d.q,o:d.o,u:d.u,d:pj.now()};}
_lsd.t.unshift(cur);_canSavePro=true;while(_lsd.t.length>_options.max_mem){_lsd.t.pop()}
_save();}
$e.removeAttr('data-'+cname+'_store');});pj.onScanCallThat('[data-'+cname+'_brief]',function($e){$e.bind(cname+'_brief',function(){var d=$.extend({ul:'ul'},$e.data(cname+'_brief')),$ul=$(d.ul,$e).empty(),$bad=$('#blockSearchHistory').removeClass('item1 item2 item3 item4 item5'),single=[];if($ul.length&&_lsd.t.length){$bad.addClass('item'+Math.min(_options.max_brief,_lsd.t.length));$.each(_lsd.t,function(i,s){if(i>=_options.max_brief)return false;var t=[],$li;s.q&&t.push(s.q);s.o&&t.push(s.o);t=t.join(', ');if(-1==$.inArray(t.toLowerCase(),single)){single.push(t.toLowerCase());$ul.append($li=$('<li/>').append($('<a/>').attr({href:s.u,title:t,'data-pjstats':JSON.stringify({'idTag':'PERSO-HISTO-VERS-LR'})}).html(t)));if(_options.gest_url_get_brief_search){var ongName='tab'+(i+1);if(0==$('.'+ongName,$bad).length){$bad.append($('<div class="wrapperContent '+ongName+'"><div class="loader"></div></div>').hide());}
$li.prepend($('<button type="button">'
+'<span class="open" title="Lire les derni&egrave;res recherches">Lire les derni&egrave;res recherches</span>'
+'<span class="close js_hide" title="Fermer les derni&egrave;res recherches">Fermer</span>'
+'</button>').attr({'data-pjonglet':'','data-pjstats':JSON.stringify({'idTag':'PERSO-HISTO-CHEVRON'})}).pjSaveCompParams({pjonglet:{cont:'blockSearchHistory',ong:ongName,closer:1,contentCallback:function(options,$container,$target){if($target&&$target.length){$.post(_options.gest_url_get_brief_search,$.extend({search:JSON.stringify(s)},pj.ajaxParam),function(html){$target.empty().append(html).pjScan();});}}}}));}}});$e.show();}else{$e.hide();}}).trigger(cname+'_brief');$('body').bind(cname+'_saved',function(){$e.trigger(cname+'_brief');});});pj.onScanCallThat('[data-'+cname+'_provu]',function($e){_addPro($e,cname+'_provu');});pj.onScanCallThat('[data-'+cname+'_listing]',function($e){if(_options.gest_url_get_one){var jours=['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'],mois=["Janvier","F\x09vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\x09cembre"],$more=$('#'+_options.gest_more_results);function _getSearch(s,$contSearch){var s2=$.extend(true,{},s);if(s2.pro){s2.pro=s2.pro.slice(0,Math.min(_options.gest_max_by_search,s2.pro.length));}
$.post(_options.gest_url_get_one,$.extend({search:JSON.stringify(s2)},pj.ajaxParam),function(html){$contSearch.empty().append(html).pjScan();if(_lsd.t.length<=$('[data-'+cname+'_sid]').length){$more.hide();}});}
function _getList(){var nbAff=$('[data-'+cname+'_sid]').length;$.each(_lsd.t,function(i,s){if(i<nbAff)return true;if(i>=(0==nbAff?_options.gest_max_first:nbAff+_options.gest_max_next))return false;var $contDay,$contSearch=$('<div/>').attr('data-'+cname+'_sid',s.id),today=new Date(),hier=new Date(),d=new Date(),nextIso;today.setHours(0,0,0,0);hier.setDate(today.getDate()-1);d.setTime(s.d);nextIso=d.getFullYear()
+"-"+("0"+(1+d.getMonth())).slice(-2)
+"-"+("0"+d.getDate()).slice(-2);$contDay=$('[data-'+cname+'_jour="'+nextIso+'"]');if(!$contDay.length){var sd="";if(today.getDate()==d.getDate()){sd="Aujourd'hui -";}else if(hier.getDate()==d.getDate()){sd="Hier -";}else{sd=jours[d.getDay()];}
$e.append($contDay=$('<div />').attr('data-'+cname+'_jour',nextIso).append('<h2>'+sd+' '+d.getDate()+' '+mois[d.getMonth()]+' '+d.getFullYear()+'</h2>'));}
$contDay.append($contSearch);_getSearch(s,$contSearch);});}
_getList();if($more.length){if(_lsd.t.length<_options.gest_max_first){$more.hide();}else{$('button',$more).bind('click.'+cname+'_more',function(e){_getList();});}}
pj.$doc.on('click.'+cname+'_delsearch','[data-'+cname+'_delsearch]',function(e){var d=$(this).data(cname+'_delsearch');if(d.sid)$.each(_lsd.t,function(i,s){if(s.id==d.sid){var $contSearch=$('[data-'+cname+'_sid="'+d.sid+'"]'),$contDay=$contSearch.closest('[data-'+cname+'_jour]');$contSearch.remove();if(0==$('[data-'+cname+'_sid]',$contDay).length){$contDay.remove();}
_lsd.t.splice(i,1);_save();_getList();return false;}});}).on('click.'+cname+'_delpro','[data-'+cname+'_delpro]',function(e){var d=$(this).data(cname+'_delpro');if(d.sid)$.each(_lsd.t,function(i,s){if(s.id==d.sid){if(s.pro)$.each(s.pro,function(j,p){if(p.id==d.pid){var $li=$('#'+d.hid),$ul=$li.closest('ul');$li.remove();s.pro.splice(j,1);_save();if(_options.gest_max_by_search<=s.pro.length&&_options.gest_url_get_pro&&$ul.length){$li=$('<li class="loading"/>').appendTo($ul);$.post(_options.gest_url_get_pro,$.extend({pro:JSON.stringify({id:s.id,pro:s.pro[_options.gest_max_by_search-1]})},pj.ajaxParam),function(html){$li.replaceWith(html).pjScan(true);});}else{if(!s.pro.length){setTimeout(function(){_getSearch(s,$('[data-'+cname+'_sid="'+s.id+'"]'));},10);}}
return false;}});return false;}});});$('body').bind(cname+'_saved',function(){if(!_lsd.t.length){$('[data-'+cname+'_jour]').remove();}});}});},test_ac:function($e,o){var myhs=pj.myhistosearch,is_q=$e.is('#quoiqui'),is_o=$e.is('#ou'),$f=$e.closest('form');if(!_options.off&&(is_q||is_o)&&$f.is('[data-'+cname+'_ac]')){function _acData(){var rd=[],rows=[];for(var i in _lsd.t){var d1=_lsd.t[i],d2=is_q?d1.q:d1.o;if(-1==$.inArray(d2,rd)){rd.push(d2);rows.push({value:d2,rang:(i+1),source:'HISTORIQUE',type:'',id:''});}}
return rows;}
$.extend(o,{target:2,showEmpty:true,closerLib:undefined,closer:pj.nop,title:function($list,input){if(!$list.data('ac-title')){if(_options.acTitTopRech){var $t=$(_options.acTitTopRech);$list.before($t).data('ac-title',$t);}}},listFilled:function($ul){var nbTop=0;if($ul){nbTop=$('>li',$ul).length;$ul.prevUntil('ul')[$('>li',$ul).length?'show':'hide']();}
$e.data('nbTop',nbTop);}});var o2=$.extend({},o,{target:1,minChars:0,ulClass:"history",title:function($list,input){var $t=$list.data('ac-title');if(!$t){if(_options.user_off){if(_options.acTitMyRechOff){$t=$(_options.acTitMyRechOff);}}else if(_options.acTitMyRechOn){$t=$(_options.acTitMyRechOn);}
if($t){$list.before($t).data('ac-title',$t);}}
if($t&&_options.user_off){$t.filter('.activateHistory')[""==$(input).val()?'show':'hide']();}},listFilled:function($ul){var nbHisto=$('>li',$ul).length;$e.data('nbHisto',nbHisto).ac_setOptions({target:2,max:10-nbHisto});},formatMatch:function(row,i,n){return''+row[0].value;},formatItem:function(row,i,n){row[0].rang=i;var rc=''+row[0].value;return $('<div>'+rc+'</div>').attr('title',rc).wrap("<div></div>").parent().html();}});$e.autocomplete(_acData(),o2);$('body').bind(cname+'_saved',function(){$e.ac_setOptions({target:1,data:_acData()});});}}});}else{$('body').addClass(cname+'_off');}})('pjmyhistosearch');;(function(cn){pj[cn]={moteurAC:{ouVintage:0x01,ouAlgolia:0x02,quoiQuiVintage:0x04,quoiQuiAlgolia:0x08}};$.fn[cn]=function(o){var $e=this,$f=$e.closest('form'),d=$.extend($e.pjCompParams(cn,{url:undefined,closerLib:undefined,delay:0,inputClass:"ac_input",itemClass:'pj_ac_result_line',itemMaxlength:45,hoverClass:'ac_over',loadingClass:undefined,max:5,minChars:1,resultsClass:'pj_ac_result',aladin:undefined,dataType:'json',autoFill:false,mustMatch:false,matchContains:false,cacheLength:0,selectFirst:false,matchSubset:true,parse:function(d){var rows=[],s;$.each(d||[],function(){if(s=this.corrige){if(this.cp){s+=' '+this.cp;}
rows.push({data:this,value:s,result:s})}});return rows;},formatItem:function(row,i,n){var rc=row.corrige||'',$ret=$('<div />'),title=rc;if(row.cp){title+=" ("+row.cp+")";$ret.html('<span>'+rc+'</span><span class="zipCode">'+row.cp+'</span>');}else{$ret.html(rc);}
$ret.attr('title',title);return $ret.wrap('<div />').parent().html();}}),o||{});d.resultsClass="pjAutocomplete "+d.resultsClass;if(d.url){if(d.closerLib){d.closer=function($cont,input){$('<div id="divCloseAC"><a href="#null">'+d.closerLib+'</a></div>').appendTo($cont).click(function(e){e.preventDefault();$(input).unautocomplete();});}}
if(d.aladin){d.pjBeforeChangingValue=function($input){var v=$input.val();$('#'+d.aladin+'Saisi',$f).val(v);$('#'+d.aladin+'NbCar',$f).val(v.length);}}
var is_q=$e.is('#quoiqui'),is_o=$e.is('#ou');if(is_q||is_o){d.parse=function(d){var rows=[],s;$.each(d||[],function(i){if(s=this.corrige){if(this.cp){s+=' '+this.cp;}
rows.push({value:s,result:s,data:$.extend({},this,{rang:(i+1),source:'TOP',type:'',id:''})})}});return rows;};d.listFilled=function($ul){$e.data('nbTop',$ul?$('>li',$ul).length:0);};function _addHiddenValue(name,value){var $i=$f.find(':input[name="'+name+'"]').filter(':text,input[type="hidden"],textarea');if(0==$i.length){$f.append($i=$('<input/>').attr({type:'hidden',name:name,value:value}));}else{$i.val(value);}
return $i;}
$e.bind("result resetstats",function(e,data,value){var typeInput=is_q?'QuiQuoi':'Ou',sd=data?($.isPlainObject(data)?data:data[0]):{};_addHiddenValue('moteurAC',($('#ou').data('moteurAC')||pj[cn].moteurAC.ouVintage)|($('#quoiqui').data('moteurAC')||pj[cn].moteurAC.quoiQuiVintage));_addHiddenValue('rang'+typeInput,sd.rang||'');$e.data('acvalue',value||'');_addHiddenValue('source'+typeInput,sd.source||'');_addHiddenValue('type'+typeInput,sd.type||'');_addHiddenValue('id'+typeInput,sd.id||'');_addHiddenValue('nbProposition'+typeInput+'Top',$e.data('nbTop')||0);_addHiddenValue('nbProposition'+typeInput+'Histo',$e.data('nbHisto')||0);});}
$e.unautocomplete();pj.myhistosearch&&pj.myhistosearch.test_ac($e,d);pj.doAction('beforeInit.'+cn,$e,d);$e.autocomplete(d.url,d);}
return this;}
pj.add_lib(pj.autocomplete={init_frwk:function(){pj.onScanCallThat('[data-'+cn+']',cn);}});})('pjautocomplete');(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=$.type(urlOrData)==="string"||$.isFunction(urlOrData);options=$.extend({},$.Autocompleter.defaults,{delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData});options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},unautocomplete:function(){return this.each(function(){if(this.verrue63639)this.verrue63639();});},ac_result:function(handler){return this.bind("result",handler);},ac_search:function(handler){return this.trigger("search.autocomplete",[handler]);},ac_flushCache:function(){return this.trigger("flushCache.autocomplete");},ac_setOptions:function(options){return this.trigger("setOptions.autocomplete",[options]);}});$.Autocompleter=function(inputDom,options){options.parse=options.parse||function(data){var parsed=[],rows=data.split("\n");for(var i in rows){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}
return parsed;}
var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},$input=$(inputDom).attr("autocomplete","off").addClass(options.inputClass),timeout,previousValue="",cache=$.Autocompleter.Cache(options),hasFocus=$input.is(':focus')?1:0,lastKeyPressCode,ac_selects=$input.data('ac_selects')||[],config={mouseDownOnSelect:false,ac_selects_range:ac_selects.length},select=ac_selects[ac_selects.push($.Autocompleter.Select(options,inputDom,_selectCurrent,config))-1],blockSubmit;$input.data('ac_selects',ac_selects);if(1==ac_selects.length){$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();_keySelectsAction('prev');break;case KEY.DOWN:event.preventDefault();_keySelectsAction('next');break;case KEY.PAGEUP:event.preventDefault();if(1==$input.data('ac_selects').length){_keySelectsAction('pageUp');}
break;case KEY.PAGEDOWN:event.preventDefault();if(1==$input.data('ac_selects').length){_keySelectsAction('pageDown');}
break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(_selectCurrent()){event.preventDefault();blockSubmit=true;return false;}
break;case KEY.ESC:if($.browser.msie){var tmpVal=$input.val();setTimeout(function(){$input.val(tmpVal);_allSelectsAction('hide');},0);}else{_allSelectsAction('hide');}
break;default:clearTimeout(timeout);timeout=setTimeout(function(){$input.trigger('show.autocomplete')},options.delay);break;}});}
$input.bind("focus.autocomplete",function(){hasFocus++;}).bind("blur.autocomplete",function(){hasFocus=0;if(!config.mouseDownOnSelect){_hideResults();}}).bind("click.autocomplete",function(){if(++hasFocus>1&&!_getActiveSelect(true).visible()){_onChange(0,true);}}).bind("search.autocomplete",function(){var fn=(arguments.length>1)?arguments[1]:null;function _findCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}
if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}
$.each(_trimWords($input.val()),function(i,value){_request(value,_findCallback,_findCallback);});}).bind("show.autocomplete",function(e,p1,p2){_onChange(p1,p2);}).bind("flushCache.autocomplete",function(){cache.flush();}).bind("setOptions.autocomplete",function(){var o=arguments[1];if(options.target&&options.target!=o.target)return;$.extend(options,o);if("data"in o){cache.flush();cache.populate();}}).bind("unautocomplete.autocomplete",inputDom.verrue63639);inputDom.verrue63639=function(){select.unbind();$input.unbind('.autocomplete');$(inputDom.form).unbind(".autocomplete");options.loadingClass="";};var timer63639=setInterval(function(){if(!$('body').find(inputDom).length){clearInterval(timer63639);inputDom.verrue63639();}},1000);$.browser.opera&&$(inputDom.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});function _getActiveSelect(firstIfNone){ac_selects=$input.data('ac_selects');if(ac_selects[0].visible()){for(var j in ac_selects){if(ac_selects[j].isActive()){return ac_selects[j];}}}
return firstIfNone?ac_selects[0]:null;}
function _keySelectsAction(methodName){ac_selects=$input.data('ac_selects');if(ac_selects[0].visible()){_getActiveSelect(true)[methodName]();}else{$input.trigger('show.autocomplete',[0,true]);}}
function _allSelectsAction(methodName){ac_selects=$input.data('ac_selects');for(var j in ac_selects){ac_selects[j][methodName]();}}
function _selectCurrent(){var selected=_getActiveSelect(true).selected();if(!selected)return false;options.pjBeforeChangingValue($input);var v=selected.result;previousValue=v;if(options.multiple){var words=_trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}
v+=options.multipleSeparator;}
$input.val(v);_hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}
function _onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){_allSelectsAction('hide')
return;}
var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)return;previousValue=currentValue;currentValue=_lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)currentValue=currentValue.toLowerCase();_request(currentValue,_receiveData,_hideResultsEmpty);}else{_hideResultsEmpty();}}
function _trimWords(value){if(!value)return[""];var words=value.split(options.multipleSeparator),result=[];$.each(words,function(i,value){if($.trim(value))result[i]=$.trim(value);});return result;}
function _lastWord(value){if(!options.multiple)return value;var words=_trimWords(value);return words[words.length-1];}
function _autoFill(q,sValue){if(options.autoFill&&(_lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(_lastWord(previousValue).length));$.Autocompleter.Selection(inputDom,previousValue.length,previousValue.length+sValue.length);}}
function _hideResultsNow(){timeout&&clearTimeout(timeout);timeout=0;_stopLoading();select.hide();if(options.mustMatch){$input.ac_search(function(result){if(!result){if(options.multiple){var words=_trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}else{$input.val("");}}});}}
function _hideResults(){clearTimeout(timeout);timeout=setTimeout(_hideResultsNow,200);}
function _hideResultsEmpty(){_stopLoading();select.emptyList();if(!options.showEmpty)_hideResultsNow();}
function _receiveData(q,data){if(hasFocus&&((data&&data.length)||options.showEmpty)){_stopLoading();select.display(data,q);data.length&&_autoFill(q,data[0].value);select.show();}else{_hideResultsEmpty();}}
function _request(term,success,failure){if(!options.matchCase){term=term.toLowerCase();}
var data=cache.load(term);if(data&&data.length){success(term,data);}else if($.isFunction(options.url)){options.url(term,success,failure);}else if($.type(options.url)==="string"&&options.url.length>0){var extraParams={};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+inputDom.name,dataType:options.dataType,url:options.url+'/'+encodeURIComponent(_lastWord(term)),success:function(data){var parsed=options.parse(data);cache.add(term,parsed);success(term,parsed);}});}else if(options.showEmpty){success(term,data);}else{select.emptyList();failure(term);}}
function _stopLoading(){$input.removeClass(options.loadingClass);}};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",ulClass:"",loadingClass:"ac_loading",hoverClass:"ac_over",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180,title:function($items_ul,inputDom){},closer:function($ac_container,inputDom){},pjBeforeChangingValue:pj.nop};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)
s=s.toLowerCase();var i=s.indexOf(sub);if(options.matchContains=="word"){i=s.toLowerCase().search("\\b"+sub.toLowerCase());}
if(i==-1)return false;return i==0||options.matchContains;};function add(q,value){if(length>options.cacheLength){flush();}
if(!data[q]){length++;}
data[q]=value;}
function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=$.isArray(rawValue)?rawValue:[rawValue];var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false)
continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])
stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:(options.formatResult&&options.formatResult(rawValue))||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}
setTimeout(populate,25);function flush(){data={};length=0;}
return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)
return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}
return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}
return null;}};};$.Autocompleter.Select=function(options,inputDom,onSelectCallback,config){var $input=$(inputDom),active=-1,data,term="",needsInit=true,$ac_container,$items_ul,$li_items;function _showSelect(){var $activeLi=$li_items.eq(active).addClass(options.hoverClass);if(options.scroll&&$activeLi&&$activeLi.length){var offset=0;$li_items.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+$activeLi[0].offsetHeight-$items_ul.scrollTop())>$items_ul[0].clientHeight){$items_ul.scrollTop(offset+$activeLi[0].offsetHeight-$items_ul.innerHeight());}else if(offset<$items_ul.scrollTop()){$items_ul.scrollTop(offset);}}}
function _hideSelect(){var ret=active;active=-1;$li_items&&$li_items.eq(ret).removeClass(options.hoverClass);return ret;}
function _moveSelect(step){if($li_items){var ac_selects=$input.data('ac_selects'),nextActive=_hideSelect()+step;if(nextActive<0){for(var i=config.ac_selects_range-1;i>=0;i--){if(ac_selects[i].last()){return true;}}
for(var i=ac_selects.length-1;i>config.ac_selects_range;i--){if(this==ac_selects[i])break;if(ac_selects[i].last()){return true;}}
active=$li_items.length-1;}else if(nextActive>=$li_items.length){for(var i=config.ac_selects_range+1;i<ac_selects.length;i++){if(ac_selects[i].first()){return true;}}
for(var i=0;i<config.ac_selects_range;i++){if(this==ac_selects[i])break;if(ac_selects[i].first()){return true;}}
active=0;}else{active=nextActive;}
_showSelect();return true;}
return false;};function _fillList(){$items_ul.empty();active=-1;for(var i=0,max=(options.max&&options.max<data.length)?options.max:data.length;i<max;i++){if(!data[i])continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)continue;$("<li/>").data("ac_data",data[i]).html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo($items_ul);}
$li_items=$items_ul.find("li");if(options.selectFirst){$li_items.eq(0).addClass(options.hoverClass);active=0;}
options.listFilled&&options.listFilled($items_ul);$items_ul[$li_items.length?'show':'hide']();$.fn.bgiframe&&$items_ul.bgiframe();}
return{display:function(d,q){if(needsInit){$ac_container=$input.data('ac-containers');if(!$ac_container){$ac_container=$('<div/>').hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);options.closer($ac_container,inputDom);$input.data('ac-containers',$ac_container);}
$items_ul=$("<ul/>").addClass(options.ulClass).appendTo($ac_container).mousemove(function(event){var $li=$(event.target).closest('li');if($li.length){active=$li_items.removeClass(options.hoverClass).index($li.addClass(options.hoverClass));var ac_selects=$input.data('ac_selects');for(var i in ac_selects){if(i!=config.ac_selects_range)ac_selects[i].lostActive();}}}).click(function(e){$(e.target).closest('li').addClass(options.hoverClass);onSelectCallback();inputDom.focus();e.preventDefault();}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)$ac_container.css("width",options.width);needsInit=false;}
data=d;term=q;options.title($items_ul,inputDom);_fillList();},next:function(){_moveSelect(1);},prev:function(){var first=active==0;if(first){var ac_selects=$input.data('ac_selects');for(var i=config.ac_selects_range-1;i>=0;i--){if(ac_selects[i].hasItems()){first=false;break;}}}
if(first){$input.focus().blur().focus();}else{_moveSelect(-1);}},first:function(){if($li_items&&$li_items.length){_hideSelect();active=0;_showSelect();return true;}
return false;},last:function(){if($li_items&&$li_items.length){_hideSelect();active=$li_items.length-1;_showSelect();return true;}
return false;},pageUp:function(){if(active!=0&&active-8<0){_moveSelect(-active);}else{_moveSelect(-8);}},pageDown:function(){if(active!=$li_items.length-1&&active+8>$li_items.length){_moveSelect($li_items.length-1-active);}else{_moveSelect(8);}},hide:function(){$ac_container&&$ac_container.hide();$li_items&&$li_items.removeClass(options.hoverClass);active=-1;},emptyList:function(){$items_ul&&$items_ul.empty().hide();options.listFilled&&options.listFilled($items_ul);active=-1;},isActive:function(){return-1!=active;},lostActive:function(){_hideSelect();},hasItems:function(){return $li_items&&$li_items.length;},visible:function(){return $ac_container&&$ac_container.is(":visible");},current:function(){return this.visible()&&($li_items.filter("."+options.hoverClass)[0]||options.selectFirst&&$li_items[0]);},show:function(){var offset=$input.offset();$ac_container.css({width:typeof options.width=="string"||options.width>0?options.width:$input.outerWidth()-parseInt($ac_container.css("border-left-width"))-parseInt($ac_container.css("border-right-width")),top:offset.top+inputDom.offsetHeight,left:offset.left}).show();if(options.scroll){$items_ul.scrollTop(0);$items_ul.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;$li_items.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;$items_ul.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){$li_items.width($items_ul.width()-parseInt($li_items.css("padding-left"))-parseInt($li_items.css("padding-right")));}}}},selected:function(){return $("li."+options.hoverClass,$items_ul).removeClass(options.hoverClass).data("ac_data");},unbind:function(){$ac_container&&$ac_container.remove();$input.data('ac-containers',$ac_container=null);needsInit=true;}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}};})(jQuery);pj.add_lib({init_frwk:function(){pj.onScanCallThat("[data-pjautofixed]",function($e){var d=$e.pjCompParams('pjautofixed',{top:0,klass:'pjfixed'}),$win=$(window),cssTop=$e.css("top"),eTop=$e.offset().top;$win.on('scroll.pjautofixed show',function(e){if($e.is(':visible')){var $r,isFixed=$e.hasClass(d.klass),sTop=(d.below&&($r=$(d.below)).size())?(parseInt($r.css('top'))||0)
+$r.outerHeight(false):d.top,x=$win.scrollTop()>=((isFixed?eTop:$e.offset().top)-sTop),minus=0;if(d.above&&($r=$(d.above)).size()){minus=Math.min(0,$r.offset().top-($win.scrollTop()+$e.outerHeight(true)+sTop));}else if(d.inside&&($r=$(d.inside)).size()){minus=Math.min(0,$r.offset().top+$r.height()-($win.scrollTop()+$e.outerHeight(true)+sTop));}
if(x&&!isFixed)eTop=$e.offset().top;$e.toggleClass(d.klass,x).css('top',x?sTop+minus:cssTop)}}).trigger('scroll.pjautofixed');});}});(function($){$.fn.jcarousel=function(o){if(typeof o=='string'){var instance=$(this).data('jcarousel'),args=Array.prototype.slice.call(arguments,1);return instance[o].apply(instance,args);}else
return this.each(function(){$(this).data('jcarousel',new $jc(this,o));});};var defaults={vertical:false,start:1,offset:1,size:null,scroll:3,visible:null,animation:'normal',easing:'swing',auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:'<div></div>',buttonPrevHTML:'<div></div>',buttonNextEvent:'click',buttonPrevEvent:'click',buttonNextCallback:null,buttonPrevCallback:null,verrue81976:0};$.jcarousel=function(e,o){this.options=$.extend({},defaults,o||{});this.locked=false;this.skin=null;this.container=null;this.clip=null;this.list=null;this.buttonNext=null;this.buttonPrev=null;this.wh=!this.options.vertical?'width':'height';this.lt=!this.options.vertical?'left':'top';var skin='',split=e.className.split(' ');for(var i=0;i<split.length;i++){if(split[i].indexOf('jcarousel-skin')!=-1){$(e).removeClass(split[i]);skin+=split[i]+' ';}}
if(e.nodeName=='UL'||e.nodeName=='OL'){this.list=$(e);this.container=this.list.parent();if(this.container.hasClass('jcarousel-clip')){if(!this.container.parent().hasClass('jcarousel-container'))
this.container=this.container.wrap('<div></div>');this.container=this.container.parent();}else if(!this.container.hasClass('jcarousel-container'))
this.container=this.list.wrap('<div></div>').parent();}else{this.container=$(e);this.list=this.container.find('ul,ol').eq(0);}
if(skin!=''&&this.container.parent()[0].className.indexOf('jcarousel-skin')==-1){this.container.wrap('<div class=" '+skin+'"></div>');this.skin=this.container.parent();}
this.clip=this.list.parent();var $maxcontainer=this.skin||this.container,$ekeepplace=$('<span/>').insertBefore($maxcontainer);$("body").append($maxcontainer);if(!this.clip.length||!this.clip.hasClass('jcarousel-clip'))
this.clip=this.list.wrap('<div></div>').parent();this.buttonNext=$('.jcarousel-next',this.container);if(this.buttonNext.size()==0&&this.options.buttonNextHTML!=null)
this.buttonNext=this.clip.after(this.options.buttonNextHTML).next();this.buttonNext.addClass(this.className('jcarousel-next'));this.buttonPrev=$('.jcarousel-prev',this.container);if(this.buttonPrev.size()==0&&this.options.buttonPrevHTML!=null)
this.buttonPrev=this.clip.after(this.options.buttonPrevHTML).next();this.buttonPrev.addClass(this.className('jcarousel-prev'));this.clip.addClass(this.className('jcarousel-clip')).css({overflow:'hidden',position:'relative',width:'100%',height:'100%'});this.list.addClass(this.className('jcarousel-list')).css({overflow:'hidden',position:'relative',top:0,left:0,margin:0,padding:0});this.container.addClass(this.className('jcarousel-container')).css({position:'relative'});var di=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null;var li=this.list.children('li');var self=this;if(li.size()>0){var wh=0,i=this.options.offset;li.each(function(){self.format(this,i++);wh+=self.dimension(this,di);});this.list.css(this.wh,wh+'px');if(!o||o.size===undefined)
this.options.size=li.size();}
this.container.css('display','block');this.buttonNext.css('display','block');this.buttonPrev.css('display','block');this.funcNext=function(){self.next();};this.funcPrev=function(){self.prev();};this.funcResize=function(){self.reload();};if(this.options.initCallback!=null)
this.options.initCallback(this,'init');this.setup();$ekeepplace.replaceWith($maxcontainer);};var $jc=$.jcarousel;$jc.fn=$jc.prototype={jcarousel:'0.2.4'};$jc.fn.extend=$jc.extend=$.extend;$jc.fn.extend({setup:function(){this.first=null;this.last=null;this.prevFirst=null;this.prevLast=null;this.animating=false;this.timer=null;this.tail=null;this.inTail=false;if(this.locked)
return;this.list.css(this.lt,this.pos(this.options.offset)+'px');var p=this.pos(this.options.start);this.prevFirst=this.prevLast=null;this.animate(p,false);},reset:function(){this.list.empty();this.list.css(this.lt,'0px');this.list.css(this.wh,'10px');if(this.options.initCallback!=null)
this.options.initCallback(this,'reset');this.setup();},reload:function(force){if(this.tail!=null&&this.inTail)
this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=false;if(this.options.reloadCallback!=null)
this.options.reloadCallback(this);if(this.options.visible!=null||force){var self=this,di=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null,wh=0,lt=0;$('li',this.list).each(function(i){wh+=self.dimension(this,di);if(i+1<self.first)
lt=wh;});this.list.css(this.wh,wh+'px');this.list.css(this.lt,-lt+'px');}
this.scroll(this.first,false);},lock:function(){this.locked=true;this.buttons();},unlock:function(){this.locked=false;this.buttons();},size:function(s){if(s!=undefined){this.options.size=s;if(!this.locked)
this.buttons();}
return this.options.size;},has:function(i,i2){if(i2==undefined||!i2)
i2=i;if(this.options.size!==null&&i2>this.options.size)
i2=this.options.size;for(var j=i;j<=i2;j++){var e=this.get(j);if(!e.length||e.hasClass('jcarousel-item-placeholder'))
return false;}
return true;},get:function(i){return $('.jcarousel-item-'+i,this.list);},add:function(i,s){var e=this.get(i),old=0,add=0;if(e.length==0){var c,e=this.create(i),j=$jc.intval(i);while(c=this.get(--j)){if(j<=0||c.length){j<=0?this.list.prepend(e):c.after(e);break;}}}else
old=this.dimension(e);e.removeClass(this.className('jcarousel-item-placeholder'));typeof s=='string'?e.html(s):e.empty().append(s);var di=this.options.visible!=null?Math.ceil(this.clipping()/this.options.visible):null;var wh=this.dimension(e,di)-old;if(i>0&&i<this.first)
this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-wh+'px');this.list.css(this.wh,$jc.intval(this.list.css(this.wh))+wh+'px');return e;},remove:function(i){var e=this.get(i);if(!e.length||(i>=this.first&&i<=this.last))
return;var d=this.dimension(e);if(i<this.first)
this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+d+'px');e.remove();this.list.css(this.wh,$jc.intval(this.list.css(this.wh))-d+'px');},next:function(){this.stopAuto();if(this.tail!=null&&!this.inTail)
this.scrollTail(false);else
this.scroll(((this.options.wrap=='both'||this.options.wrap=='last')&&this.options.size!=null&&this.last==this.options.size)?1:this.first+this.options.scroll);},prev:function(){this.stopAuto();if(this.tail!=null&&this.inTail)
this.scrollTail(true);else
this.scroll(((this.options.wrap=='both'||this.options.wrap=='first')&&this.options.size!=null&&this.first==1)?this.options.size:this.first-this.options.scroll);},scrollTail:function(b){if(this.locked||this.animating||!this.tail)
return;var pos=$jc.intval(this.list.css(this.lt));!b?pos-=this.tail:pos+=this.tail;this.inTail=!b;this.prevFirst=this.first;this.prevLast=this.last;this.animate(pos);},scroll:function(i,a){if(this.locked||this.animating)
return;this.animate(this.pos(i),a);},pos:function(i){var pos=$jc.intval(this.list.css(this.lt));if(this.locked||this.animating||!this.container.is(':visible'))
return pos;if(this.options.wrap!='circular')
i=i<1?1:(this.options.size&&i>this.options.size?this.options.size:i);var back=this.first>i;var f=this.options.wrap!='circular'&&this.first<=1?1:this.first;var c=back?this.get(f):this.get(this.last);var j=back?f:f-1;var e=null,l=0,p=false,d=0,g;while(back?--j>=i:++j<i){e=this.get(j);p=!e.length;if(e.length==0){e=this.create(j).addClass(this.className('jcarousel-item-placeholder'));c[back?'before':'after'](e);if(this.first!=null&&this.options.wrap=='circular'&&this.options.size!==null&&(j<=0||j>this.options.size)){g=this.get(this.index(j));if(g.length)
this.add(j,g.children().clone(true));}}
c=e;d=this.dimension(e);if(p)
l+=d;if(this.first!=null&&(this.options.wrap=='circular'||(j>=1&&(this.options.size==null||j<=this.options.size))))
pos=back?pos+d:pos-d;}
var clipping=this.clipping();var cache=[];var visible=0,j=i,v=0;var c=this.get(i-1);while(++visible){e=this.get(j);p=!e.length;if(e.length==0){e=this.create(j).addClass(this.className('jcarousel-item-placeholder'));c.length==0?this.list.prepend(e):c[back?'before':'after'](e);if(this.first!=null&&this.options.wrap=='circular'&&this.options.size!==null&&(j<=0||j>this.options.size)){g=this.get(this.index(j));if(g.length)
this.add(j,g.find('>*').clone(true));}}
c=e;var d=this.dimension(e);if(d==0){alert('jCarousel: No width/height set for items (.jcarousel-list li, .jcarousel-item). This will cause an infinite loop. Aborting...');return 0;}
if(this.options.wrap!='circular'&&this.options.size!==null&&j>this.options.size)
cache.push(e);else if(p)
l+=d;v+=d;if(v>=clipping)
break;j++;}
for(var x=0;x<cache.length;x++)
cache[x].remove();if(l>0){this.list.css(this.wh,this.dimension(this.list)+l+'px');if(back){pos-=l;this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-l+'px');}}
var last=i+visible-1;if(this.options.wrap!='circular'&&this.options.size&&last>this.options.size)
last=this.options.size;if(j>last){visible=0,j=last,v=0;while(++visible){var e=this.get(j--);if(!e.length)
break;v+=this.dimension(e);if(v>=clipping)
break;}}
var first=last-visible+1;if(this.options.wrap!='circular'&&first<1)
first=1;if(this.inTail&&back){pos+=this.tail;this.inTail=false;}
this.tail=null;if(this.options.wrap!='circular'&&last==this.options.size&&(last-visible+1)>=1){var m=this.options.verrue81976?0:$jc.margin(this.get(last),!this.options.vertical?'marginRight':'marginBottom');if((v-m)>clipping)
this.tail=v-clipping-m;}
while(i-->first)
pos+=this.dimension(this.get(i));this.prevFirst=this.first;this.prevLast=this.last;this.first=first;this.last=last;return pos;},animate:function(p,a){if(this.locked||this.animating)
return;this.animating=true;var self=this;var scrolled=function(){self.animating=false;if(p==0)
self.list.css(self.lt,0);if(self.options.wrap=='circular'||self.options.wrap=='both'||self.options.wrap=='last'||self.options.size==null||self.last<self.options.size)
self.startAuto();self.buttons();self.notify('onAfterAnimation');};this.notify('onBeforeAnimation');if(!this.options.animation||a==false){this.list.css(this.lt,p+'px');setTimeout(scrolled,100);}else{var o=!this.options.vertical?{'left':p}:{'top':p};this.list.animate(o,this.options.animation,this.options.easing,scrolled);}},startAuto:function(s){if(s!=undefined)
this.options.auto=s;if(this.options.auto==0)
return this.stopAuto();if(this.timer!=null)
return;var self=this;this.timer=setTimeout(function(){self.next();},this.options.auto*1000);},stopAuto:function(){if(this.timer==null)
return;clearTimeout(this.timer);this.timer=null;},buttons:function(n,p){if(n==undefined||n==null){var n=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!='first')||this.options.size==null||this.last<this.options.size);if(!this.locked&&(!this.options.wrap||this.options.wrap=='first')&&this.options.size!=null&&this.last>=this.options.size)
n=this.tail!=null&&!this.inTail;}
if(p==undefined||p==null){var p=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!='last')||this.first>1);if(!this.locked&&(!this.options.wrap||this.options.wrap=='last')&&this.options.size!=null&&this.first==1)
p=this.tail!=null&&this.inTail;}
var self=this;this.buttonNext[n?'bind':'unbind'](this.options.buttonNextEvent+'.jcarousel',this.funcNext)[n?'removeClass':'addClass'](this.className('jcarousel-next-disabled')).attr('disabled',n?false:true);this.buttonPrev[p?'bind':'unbind'](this.options.buttonPrevEvent+'.jcarousel',this.funcPrev)[p?'removeClass':'addClass'](this.className('jcarousel-prev-disabled')).attr('disabled',p?false:true);if(this.buttonNext.length>0&&(this.buttonNext[0].jcarouselstate==undefined||this.buttonNext[0].jcarouselstate!=n)&&this.options.buttonNextCallback!=null){this.buttonNext.each(function(){self.options.buttonNextCallback(self,this,n);});this.buttonNext[0].jcarouselstate=n;}
if(this.buttonPrev.length>0&&(this.buttonPrev[0].jcarouselstate==undefined||this.buttonPrev[0].jcarouselstate!=p)&&this.options.buttonPrevCallback!=null){this.buttonPrev.each(function(){self.options.buttonPrevCallback(self,this,p);});this.buttonPrev[0].jcarouselstate=p;}},notify:function(evt){var state=this.prevFirst==null?'init':(this.prevFirst<this.first?'next':'prev');this.callback('itemLoadCallback',evt,state);if(this.prevFirst!==this.first){this.callback('itemFirstInCallback',evt,state,this.first);this.callback('itemFirstOutCallback',evt,state,this.prevFirst);}
if(this.prevLast!==this.last){this.callback('itemLastInCallback',evt,state,this.last);this.callback('itemLastOutCallback',evt,state,this.prevLast);}
this.callback('itemVisibleInCallback',evt,state,this.first,this.last,this.prevFirst,this.prevLast);this.callback('itemVisibleOutCallback',evt,state,this.prevFirst,this.prevLast,this.first,this.last);},callback:function(cb,evt,state,i1,i2,i3,i4){if(this.options[cb]==undefined||(typeof this.options[cb]!='object'&&evt!='onAfterAnimation'))
return;var callback=typeof this.options[cb]=='object'?this.options[cb][evt]:this.options[cb];if(!$.isFunction(callback))
return;var self=this;if(i1===undefined)
callback(self,state,evt);else if(i2===undefined)
this.get(i1).each(function(){callback(self,this,i1,state,evt);});else{for(var i=i1;i<=i2;i++)
if(i!==null&&!(i>=i3&&i<=i4))
this.get(i).each(function(){callback(self,this,i,state,evt);});}},create:function(i){return this.format('<li></li>',i);},format:function(e,i){var $e=$(e).addClass(this.className('jcarousel-item')).addClass(this.className('jcarousel-item-'+i)).css({'float':'left','list-style':'none'});$e.attr('jcarouselindex',i);return $e;},className:function(c){return c+' '+c+(!this.options.vertical?'-horizontal':'-vertical');},dimension:function(e,d){var el=e.jquery!=undefined?e[0]:e;var old=!this.options.vertical?el.offsetWidth+$jc.margin(el,'marginLeft')+$jc.margin(el,'marginRight'):el.offsetHeight+$jc.margin(el,'marginTop')+$jc.margin(el,'marginBottom');if(d==undefined||old==d)
return old;var w=!this.options.vertical?d-$jc.margin(el,'marginLeft')-$jc.margin(el,'marginRight'):d-$jc.margin(el,'marginTop')-$jc.margin(el,'marginBottom');$(el).css(this.wh,w+'px');return this.dimension(el);},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-$jc.intval(this.clip.css('borderLeftWidth'))-$jc.intval(this.clip.css('borderRightWidth')):this.clip[0].offsetHeight-$jc.intval(this.clip.css('borderTopWidth'))-$jc.intval(this.clip.css('borderBottomWidth'));},index:function(i,s){if(s==undefined)
s=this.options.size;return Math.round((((i-1)/s)-Math.floor((i-1)/s))*s)+1;}});$jc.extend({defaults:function(d){return $.extend(defaults,d||{});},margin:function(e,p){if(!e)
return 0;var el=e.jquery!=undefined?e[0]:e;if(p=='marginRight'&&$.browser.safari){var old={'display':'block','float':'none','width':'auto'},oWidth,oWidth2;$.swap(el,old,function(){oWidth=el.offsetWidth;});old['marginRight']=0;$.swap(el,old,function(){oWidth2=el.offsetWidth;});return oWidth2-oWidth;}
return $jc.intval($.css(el,p));},intval:function(v){v=parseInt(v);return isNaN(v)?0:v;}});})(jQuery);pj.addCompSel('pjcarrousel').add_lib(pj.carrousel={init_frwk:function(){pj.onScanCallThat(pj.getCompSel('pjcarrousel'),function($e){var
d=$e.pjCompParams('pjcarrousel',{ajax:null,auto:null,addleds:0,scroll:null,start:1,size:null,vertical:0,visible:null,wrap:null},function(){return{old:1,ajax:$e.pjClassSuffixe('pjajax-'),scroll:$e.pjClassSuffixe('scroll-','\\S+'),start:$e.pjClassSuffixe('start-','\\d+')||'',visible:$e.pjClassSuffixe('visible-','\\d+')||'',wrap:$e.is('.circular')?'circular':null}}),$tmp,options={vertical:!!d.vertical,wrap:d.ajax&&'circular'==d.wrap?null:d.wrap,itemLoadCallback:function(jcInst,state,evt){var siz=jcInst.size(),idf=jcInst.index(jcInst.first),idl=jcInst.index(jcInst.last),vis=jcInst.options.visible||(idl-idf+1);$e.trigger('change.pjcarrousel',jcInst);if('init'==state){var pas=parseInt(d.scroll||'');jcInst.options.scroll='n-1'==d.scroll?vis-1:(isNaN(pas)?vis:pas);if('circular'==jcInst.options.wrap){$e.data('items',$('>li',jcInst.list).clone());jcInst.options.itemVisibleInCallback=$.extend(jcInst.options.itemVisibleInCallback||{},{onBeforeAnimation:function(jcInst,item,i,state,evt){jcInst.add(i,$e.data('items').eq(jcInst.index(i)-1).html()).pjScan();}});jcInst.options.itemVisibleOutCallback=$.extend(jcInst.options.itemVisibleOutCallback||{},{onAfterAnimation:function(jcInst,item,i,state,evt){jcInst.remove(i);}});}
if(d.addleds){var lis=[];for(var i=0;i<siz;i++)lis.push('<li/>');pj.carrousel.attachLeds($e,$('<ul class="'+d.addleds+'"/>').append(lis.join('')).appendTo(jcInst.container));$e.trigger('change.pjcarrousel',jcInst);}}else{}}},nop;if(($tmp=$e.find('.pjcarrousel-right')).size()){options.buttonPrevHTML=$tmp;}
if(($tmp=$e.find('.pjcarrousel-left')).size()){options.buttonNextHTML=$tmp;}
options.auto=parseInt(d.auto);if(isNaN(options.auto))options.auto=0;options.start=parseInt(d.start);if(isNaN(options.start))options.start=1;options.visible=parseInt(d.visible);if(isNaN(options.visible))options.visible=null;if(undefined!=d.animation){options.animation=d.animation;}
if(undefined!=d.easing){options.easing=d.easing;}
if(d.nobtn){options.buttonPrevHTML=options.buttonNextHTML=null;}else{options.buttonPrevCallback=options.buttonNextCallback=function(jcInst,btn,enabled){$(btn)[enabled?'removeClass':'addClass']('disabled');};}
if(d.ajax&&d.old){var jsvar=eval('window.'+d.ajax);d.ajax=null;if(jsvar&&undefined!=jsvar.totalitems&&undefined!=jsvar.url){d.ajax=jsvar.url;d.size=jsvar.totalitems;}}
if(d.ajax){if("string"===$.type(d.ajax)){d.ajax={url:d.ajax}}
options.size=d.size;options.itemLoadCallback=(function(core){return function(jcInst,state,evt){if('init'!=state||d.start>1){var idf=jcInst.index(jcInst.first);if(idf!=jcInst.prevFirst){$.ajax({dataType:"json",url:d.ajax.url,type:d.ajax.type||'GET',data:$.extend({first:idf,last:jcInst.options.visible?idf+jcInst.options.visible-1:jcInst.index(jcInst.last)},d.ajax.data||{},pj.ajaxParam),success:function(dt){if($.isArray(dt.others)){$.each(dt.others,function(){$('#'+this.id).html(this.html).pjScan();});}
if($.isArray(dt.items)){$.each(dt.items,function(i,h){jcInst.add(idf+i,$(h).html()).pjScan();});}}});}}
core.apply(this,arguments);}})(options.itemLoadCallback);options.itemVisibleOutCallback={onAfterAnimation:function(jcInst,item,i,state,evt){jcInst.remove(i);}};}
$e.jcarousel(options);});pj.onScanCallThat('ul[data-pjcarrouselleds],ol[data-pjcarrouselleds]',function($e){var d=$e.pjCompParams('pjcarrouselleds',{id:'undefined',clledon:'pjLedOn'});pj.carrousel.attachLeds($('#'+d.id),$e,d);});},attachLeds:function($c,$l,o){if($c.size()==1&&$c.is(pj.getCompSel('pjcarrousel'))){var d=$.extend({clledon:'pjLedOn'},o||{});$c.bind('change.pjcarrousel',function(e,jcInst){if(jcInst){var f1=jcInst.index(jcInst.first),l1=jcInst.index(jcInst.last),f2=0,l2=0;if(l1<f1){f2=1;l2=l1;l1=jcInst.size();}
$('>li',$l).removeClass(d.clledon).slice(f1-1,l1).addClass(d.clledon).end().slice(f2-1,l2).addClass(d.clledon).end();}});$('>li',$l).click(function(e){$c.jcarousel('scroll',$(this).prevAll('li').size()+1);});if($c.data('jcarousel')){$c.trigger('change.pjcarrousel',$c.data('jcarousel'));}}}});pj.$doc.on('click','[data-pjcarrousellink]',function(e){var $e=$(this);function _go(){var opts=$e.pjCompParams('pjcarrousellink'),$pjc=$(opts.sel);if($pjc.data('jcarousel'))$pjc.jcarousel('scroll',opts.n||1);};if($e.is('a'))e.preventDefault();if($e.is('[data-popin]')){pj.$doc.one('complete.popin',_go);}else{_go();}});;(function(cn){pj.$doc.on('change.'+cn,'input:radio,input:checkbox',function(e){var $e=$(this);$e.add("input:radio[name='"+$e.attr('name')+"']."+cn,$e.closest('form')).each(function(){var $e2=$(this),id=$e2.attr('id'),m=$e2.prop('checked');$e2.toggleClass(cn,m);if(id)$('label[for="'+id+'"]',$e2.closest('form')).toggleClass(cn,m);});if(!e.frompjchecked&&$e.is(':radio')){$("input:radio[name='"+$e.attr('name')+"']",$e.closest('form')).not($e).filter('[data-pjdisable]').trigger({type:'change',frompjchecked:true});};});})('pjchecked');pj.addCompSel('pjcookie',{olds:(pj.pjcookieOldsSel=':checkbox.pjcookiecheckbox,:checkbox.YES_chkModRecherche')}).add_lib(pj.cookie={add:function(d){if(d.action&&'plus'==d.action){var t=$.trim($.cookie(d.name));t=t?t.split('|'):[];if(-1==$.inArray(d.value,t)){t.push(d.value)}
$.cookie(d.name,t.join('|'),d);}else{$.cookie(d.name,d.value,d);}},getParams:function($e){return $e.pjCompParams('pjcookie',!$e.is(pj.pjcookieOldsSel)?{name:$e.attr('id')||'pjcookie-sans-nom',value:$e.is(':input')?$e.val():true,domain:null,path:'/',expires:null,noclick:0}:{name:'myFormPref',value:$e.val(),domain:null,path:'/',expires:$e.is(':checked')?99:-1,noclick:0});},init_frwk:function(){pj.onScanCallThat(pj.getCompSel('pjcookie'),function($e){var d=pj.cookie.getParams($e);if(d.noclick)pj.cookie.add(d);});}});pj.$doc.on('click',pj.getCompSel('pjcookie'),function(e){var $e=$(this),d=pj.cookie.getParams($e);if($e.is(':checkbox, :radio')){d.expires=$e.is(':checked')?99:-1;}
if(!d.noclick)pj.cookie.add(d);});pj.$doc.on('change','input:radio[data-pjdisable],input:checkbox[data-pjdisable]',function(e){var $e=$(this),d=$e.pjCompParams('pjdisable');dis=!$e.prop('checked');if(undefined==$.fn.pjdisable){$.fn.pjdisable=function(disable){return this.each(function(){var $one=$(this);if($one.is(':input')){$one.prop('disabled',disable).change();}else{$(':input',$one).pjdisable(disable);}});}}
d.sel&&$(d.sel).pjdisable(dis).toggleClass(d.disclass||'',dis).toggleClass(d.enaclass||'',!dis);});;(function(){var s='.pjenvoibloc,.CA_envoibloc,.PB_envoibloc,.VIDEO_envoibloc,.YES_envoibloc';pj.$doc.on('click',s,function(e){e.preventDefault();var $e=$(this),a=$e.get(0),r=pj.getRel(a),$ebCont=null;if(!r){pj.log.push_ERROR("pjenvoibloc ",pj.log.setEltIdentity("no rel attribute for {EltIdentity} ",$e));return;}
if(!pj.onglet.setUrlOngData($e))return;$ebCont=$("#"+r);if(0==$ebCont.size()){pj.log.push_ERROR("pjenvoibloc ",pj.log.setEltIdentity("no container with id="+r+" for {EltIdentity} ",$e));return;}
function _openOnglet(){if(!$e.is('[data-pjonglet]')){pj.onglet.activate($e.addClass('pjonglet'));}}
function _closerBhv($cont){return($cont||$ebCont).find('.envoibloc-closebtn').click(function(e){e.preventDefault();$ebCont.slideUp("fast").removeClass('envoibloc-open');}).end();}
if($ebCont){if($ebCont.is('.envoibloc-ready')&&!$e.is('[data-pjonglet]')){_openOnglet();}
if(!$ebCont.is('.open')){if($ebCont.is('.envoibloc-ready')){$ebCont.addClass('envoibloc-open').slideDown("fast");}else{$ebCont.html('chargement').addClass('envoibloc-loading').slideDown('fast').addClass('envoibloc-open');$.ajax({type:"GET",url:$e.data('url'),data:pj.ajaxParam,dataType:"html",success:function(h){$ebCont.removeClass('envoibloc-loading').addClass('envoibloc-ready').html(h).pjScan();pj.getAByRel(r).filter(s).not('[href$=#'+$e.data('ong')+']').each(function(){var $a2=$(this);if(pj.onglet.setUrlOngData($a2)&&$e.data('url')!=$a2.data('url')&&''!=$a2.data('url')){$.ajax({url:$a2.data('url'),data:pj.ajaxParam,dataType:"html",success:function(h){_closerBhv($(h)).hide().appendTo($ebCont).pjScan();}});}})},complete:function(h){_closerBhv().find('[data-pjonglet]').filter(":not([rel])").attr("rel",r).end().filter("[rel='nofollow']").attr("rel","nofollow "+r).end();_openOnglet();}});}}}})})();pj.postScanCallThat("FB-test-init",function($ct){if(window.fbAsyncInit&&undefined==window.FB){window.fbAsyncInit=(function(core){return function(){core.apply(this,arguments);$.each([['.fb-like','edge.create'],['.fb-send','message.send'],['.fb-comments','comment.create']],function(){var c=this[0];FB.Event.subscribe(this[1],function(u){$(c+'[data-href="'+u+'"]').click();});});}})(window.fbAsyncInit);if(0==$('#fb-root').size()){$('body').append($('<div id="fb-root"/>'));}
var c=$.ajaxSettings.cache;$.ajaxSettings.cache=true;$.getScript(document.location.protocol+'//connect.facebook.net/fr_FR/all.js');$.ajaxSettings.cache=c;}
if($ct&&window.FB){FB.XFBML.parse($ct.get(0));}}).addCompSel("pjfacebook_share");pj.$doc.on('click',pj.getCompSel('pjfacebook_share'),function(e){var $e=$(this);if(window.FB){e.preventDefault();$.getJSON($e.pjCompParams('pjfacebook_share',{},function(){return{ajax:$e.attr('rev')}}).ajax,pj.ajaxParam,function(s){FB.ui({method:'stream.publish',message:s.message,attachment:{name:s.bloc.name,caption:s.bloc.caption,description:s.bloc.description,properties:s.bloc.properties,href:s.bloc.href,media:s.bloc.media},action_links:s.actionLinks});});if($e.closest('#pjpopin').size())pj.popin.hide();}});pj.$doc.on('click','.pjguideactivite a,.pjguidelocalite a,.pjguidedepreg a',function(e){var $e=$(this),co=$e.closest('.pjguideactivite').size()?{clCode:'pjguideactivite_code',clLib:'pjguideactivite_lib'}:$e.closest('.pjguidelocalite').size()?{clCode:'pjguidelieu_code',clLib:'pjguidelocalite_lib'}:$e.closest('.pjguidedepreg').size()?{clCode:'pjguidelieu_code',clLib:'pjguidedepreg_lib'}:null,$pa=$('.pjpopin-active'),$f=$pa.closest('form');if(0==$f.size()){pj.log.push_ERROR('pj.guides.init_frwk',pj.log.setEltIdentity('Pas de "closest form" pour le lien ayant ouvert le popin : {EltIdentity}',$pa));return;}
e.preventDefault();var $i,p=($e.attr('href')||"").split('#');if(2==p.length){($i=$f.find(":input")).filter('.'+co.clCode).val(p[1]).end().filter('.'+co.clLib).val($e.attr('title')||'');if('pjguidedepreg_lib'===co.clLib){$i.filter('.pjguidelocalite_lib').val('');}
if(''!=p[0]&&pj.ie_anc_pre!=p[0]){$.ajax({type:"GET",url:p[0],data:pj.ajaxParam,dataType:"html",success:function(html){$('#pjpopin-content').html(html).pjScan()}});}else{pj.popin.hide();}}else{pj.log.push_ERROR('pj.guides.init_frwk',pj.log.setEltIdentity("Bad href Pattern in {EltIdentity}",$e));}});;(function(cn){pj.add_lib({init_frwk:function(){pj.onScanCallThat('[data-'+cn+']',function($e){var d=$e.pjCompParams(cn,{sel:$(),cl:'alertShow'});if($e.is(':radio')){$e=$e.add($('input:radio[name="'+$e.attr('name')+'"]',$e.closest('form')));}
$e.bind($e.is('input:text,input:password,textarea')?'keydown.'+cn+' paste.'+cn:'change.'+cn,function(e){$(d.sel).removeClass(d.cl);$e.unbind('.'+cn);});});}});})('pjhidealert');pj.$doc.on('click','[data-pjhistoryback]',function(e){var $e=$(this);if($e.is('a'))e.preventDefault();if(($.browser.opera||$.browser.msie?0:1)<history.length){history.back();}else{var url=$e.pjCompParams('pjhistoryback').url;url&&(document.location=url);}});if($.browser.msie&&parseInt($.browser.version)>=8){pj.$doc.on('click','[data-pjieaddservice]',function(e){var $e=$(this);if($e.is('a'))e.preventDefault();window.external.AddService($e.pjCompParams('pjieaddservice').url);});}
pj.addCompSel('pjiframeautoheight',{elt:'iframe'}).add_lib(pj.iframeautoheight={init_frwk:function(){pj.onScanCallThat(pj.getCompSel('pjiframeautoheight'),function($e){function _f(){try{$e.height($('body',$e.contents()).height()+35)}catch(e){pj.console('err:'+e)}};$e.ready(_f).load(_f);});}});;(function(cn){pj.add_lib({init_frwk:function(){pj.onScanCallThat('input[data-'+cn+']',function($e){if(!window.Mappy){pj.doAction(cn+'.noMappy');return;}
if(!navigator.geolocation){pj.doAction(cn+'.geolocationNotSupported');return;}
navigator.geolocation.getCurrentPosition(function(pos){var d=$e.data(cn);Mappy.api.init(d.mappy.id,d.mappy.token);(new Mappy.api.geolocation.Geocoder()).geocode(new Mappy.api.geo.Coordinates(pos.coords.longitude,pos.coords.latitude),function(mappyRes){mappyRes&&$e.val(mappyRes[0].Placemark.name);pj.doAction(cn+'.afterGetPos',pos,mappyRes);},function(error){pj.doAction(cn+'.mappyGeocodeError',error);pj.doAction(cn+'.afterGetPos',pos);});},function(error){pj.doAction(cn+'.getCurrentPositionError',error);},{enableHighAccuracy:true,timeout:10000,maximumAge:60000});});}});})('pjinputgeoplace');;(function(cn){pj.$doc.on('click','[data-'+cn+']',function(e){var $e=$(this),d=$e.pjCompParams(cn);document.location=d.href;});})("pjlienbloc");pj.lightbox={box:null,content:null,destination:null,a:null,firstlaunch:true,placeit:function(){if(pj.lightbox.open){if(pj.lightbox.firstlaunch){$(window).resize(pj.lightbox.placeit);pj.lightbox.firstlaunch=false;}
pj.lightbox.centerposition();}
if(pj.ie6){pj.lightbox.patchIE6.fixevoile();}},centerposition:function(){var bh=$(window).height(),bw=$(window).width(),ph=pj.lightbox.box.innerHeight(),pw=pj.lightbox.box.innerWidth(),pm=20,l=(bw>pw)?"50%":(pm+pj.lightbox.box.innerWidth()/2)+"px",t=(bh>ph)?$(window).scrollTop()+$(window).height()/2+"px":($(window).scrollTop()+pm+pj.lightbox.box.innerHeight()/2)+"px";pj.lightbox.box.css({"left":l,"z-index":"8500","margin-left":(-pj.lightbox.box.innerWidth()/2),"margin-top":(-pj.lightbox.box.innerHeight()/2),"text-align":"left","position":"absolute","top":t});if(pj.ie6){pj.lightbox.patchIE6.fixebody();}},patchIE6:{fixevoile:function(){$("#LPPNCSSV").remove();$("body").append(''
+'<style type="text/css" id="LPPNCSV">'
+'#lightbox-voile {width:expression(document.body.clientWidth)px !important;position:absolute !important;top:0 !important; height: expression( document.body.clientHeight )px !important;}'
+'</style>'
+'');},fixebody:function(){$("body").css({"height":"100%"});}},hide:function(){pj.popin.hide();pj.lightbox.box.fadeOut();pj.lightbox.box.remove();pj.lightbox.voile.fadeOut();pj.lightbox.voile.remove();pj.lightbox.open=false;return false;},before:function(){if(pj.ie6){pj.lightbox.patchIE6.fixevoile();}
$("body").prepend('<div id="lightbox"  style="display:none;overflow:auto;"><div id="lightbox-content"></div></div>');pj.lightbox.box=$("#lightbox");pj.lightbox.content=pj.lightbox.box.find("#lightbox-content");$("body").prepend('<div id="lightbox-voile" class="loading" style="display:none;position:fixed;left:0;width:100%;top:0;height:100%;z-index:8000"></div>');pj.lightbox.voile=$("#lightbox-voile");pj.lightbox.voile.css("opacity",0.60);pj.lightbox.voile.fadeIn();},successAjax:function(){pj.lightbox.content.html(arguments[0]).pjScan();},complete:function(){pj.lightbox.voile.removeClass("loading");pj.lightbox.box.find(".close").click(pj.lightbox.hide);pj.lightbox.placeit();pj.lightbox.box.fadeIn();}};pj.$doc.on('click','.pjlightbox',function(e){var $e=$(this);pj.popin.hide();pj.lightbox.ancre=null;if(pj.lightbox.a){pj.lightbox.hide()}
pj.lightbox.a=$e;pj.lightbox.voile=null;pj.lightbox.destination=$e.attr("href");var ank=pj.lightbox.destination.indexOf('#');if(ank!=-1){pj.lightbox.ancre=pj.lightbox.destination.substring(ank+1,pj.lightbox.destination.length);}
pj.lightbox.open=true;if(ank!=-1){var ancre=pj.lightbox.ancre;var refdt=$("a[name="+ancre+"]");if(refdt.length==0){pj.log.push_ERROR("pj.lightbox","lien de classe pjlightbox pointé avec son attribut rel '"+ancre+"' vers l'ancre correspondante qui n'existe pas.");}else if(refdt.closest("dt").length==0){pj.log.push_ERROR("pj.lightbox","lien de classe pjlightbox pointé avec son attribut rel '"+ancre+"' vers l'ancre correspondante  n'est pas placée dans une dt. ");}else{pj.lightbox.before();refdt=refdt.closest("dt");pj.lightbox.content.pjHtmlDtAnchor(refdt);pj.lightbox.complete();}}else{$.ajax({type:"GET",url:pj.lightbox.destination,data:pj.ajaxParam,dataType:"html",beforeSend:pj.lightbox.before,success:pj.lightbox.successAjax,complete:pj.lightbox.complete});}
e.preventDefault();});var _jm;_jm=jQuery.fn.jmedia=function(scriptoptions,mediaoptions){$(".jm_noscript").remove();if(typeof(version)=='undefined')var version=[];return this.each(function(index){var $this=jQuery(this);var soptions=jQuery.extend({elemType:this.nodeName,elemClass:'jm_replaced',forceObjectTag:false,mode:'replace',version:'6,0,0',fullScreen:false,errTxt:'',sifrPaddingTop:0,sifrPaddingBottom:0,sifrPaddingLeft:0,sifrPaddingRight:0,flashXI:false,flashXIsrc:'/js/XI.swf'},scriptoptions||{});var moptions=jQuery.extend({src:$this.attr('href')||$this.attr('src')||'#',width:320,height:280},mediaoptions||{});if(moptions.src=="#")return false;var t=_jm.getPluginName(moptions.src);if(t==false)return false;if(typeof(version[t])=='undefined'&&_jm.uaHas("w3cdom")&&!_jm.uaHas("ieMac"))version[t]=_jm.detectPluginVersion(t,soptions.forceObjectTag);if(_jm.checkVersion(soptions.version,version[t])==true){if(t=='flash'&&soptions.mode=='sifr')moptions=_jm.getSifrContent($this,moptions,soptions);else if(soptions.mode=='replace')$this.hide();var _el=$('<'+soptions.elemType+' class="'+soptions.elemClass+'"></'+soptions.elemType+'>');if(soptions.fullScreen==true){$(_el).width("100%");$(_el).height("100%");$(_el).css({"position":"absolute","left":0,"top":0});$("body").css({"overflow":"hidden","height":"100%","width":"100%"});$("html").css({"overflow":"hidden","height":"100%","width":"100%"});moptions.width="100%";moptions.height="100%";}
var _s=_jm.writeHtml($this,t,soptions,moptions);if(t=='flash'&&soptions.mode=='sifr'){var _alternate=document.createElement('span');$(_alternate).addClass('sifr-alternate');$(_alternate).append($this.html());$this.html('');if((typeof(_s)).toString().toLowerCase()=='string')$this.html(_s);else $this.append(_s);$this.append(_alternate);}
else if(soptions.mode=='onclick'){$(this).click(function(){$(_el).hide();$(".jm_closebtn").remove();var _closecon=$("<span></span>");;$(_closecon).addClass("jm_closebtn");$(_closecon).css({width:moptions.width});var _closebtn=$('<a href="#">close&nbsp;</a>');$(_closecon).append($(_closebtn));$(_closebtn).click(function(){$(_el).remove();return false;});$(this).after($(_el));$(_el).show();if((typeof(_s)).toString().toLowerCase()=='string')$(_el).html(_s);else $(_el).append(_s);$(_el).prepend($(_closecon));return false;});}
else{if((typeof(_s)).toString().toLowerCase()=='string')_el.html(_s);else _el.append(_s);$this.after(_el).remove();}
return true;}
else if(t=='flash'&&soptions.flashXI==true&&(_jm.checkVersion("6,0,65",version[t])==true)){moptions.src=soptions.flashXIsrc;moptions.width='215';moptions.height='138';var _type=_jm.type=='axo'?"ActiveX":"PlugIn";var _uc=typeof soptions.flashXIcancelURL!="undefined"?"&xiUrlCancel="+soptions.flashXIcancelURL:"";var _uf=typeof soptions.flashXIfailedURL!="undefined"?"&xiUrlFailed="+soptions.flashXIfailedURL:"";if(_jm.uaHas("xml")&&_jm.uaHas("safari"))var _mmd=document.getElementsByTagName("title")[0].firstChild.nodeValue=document.getElementsByTagName("title")[0].firstChild.nodeValue.slice(0,47)+" - Flash Player Installation";else var _mmd=document.title=document.title.slice(0,47)+" - Flash Player Installation";moptions.flashVars="MMredirectURL="+window.location+"&MMplayerType="+_type+"&MMdoctitle="+_mmd+_uc+_uf;var _s=_jm.writeHtml($this,t,soptions,moptions);var _el=jQuery('<div id="flashXI"></div>');var _con=jQuery('<div id="flashXIcon"></div>');if((typeof(_s)).toString().toLowerCase()=='string')_el.html(_s);else _el.append(_s);$('body').css({height:"100%",overflow:"hidden"});$('html').css({height:"100%",overflow:"hidden"});$(_con).css({position:"absolute",top:0,left:0,"z-index":1000,background:"white",width:"100%",height:"100%",filter:"alpha(opacity:75)",opacity:0.75});$(_el).css({position:"absolute",left:"50%",top:"50%","margin-left":parseInt(moptions.width/2*(-1))+"px","margin-top":parseInt(moptions.height/2*(-1))+"px"});$(_el).css({width:moptions.width+"px",height:moptions.height+"px"});$(_con).append(_el);$('body').prepend($(_con));}
else if(soptions.mode=='onclick'){var _trig=false;$(this).click(function(){$(".jm_onfailure").remove();if(_trig==false){var errtxt=$(soptions.errTxt.replace(/#link/,$(this).attr("href")));$(this).after($(errtxt));if(_jm.uaHas("w3cdom")&&!_jm.uaHas("ieMac"))$(".jm_oldbrowsers").remove();_trig=true;}
else{_trig=false;}
return false;});}
else return false;});};_jm.checkVersion=function(reqver,uaver){if(typeof(uaver)=='undefined'||uaver=='not installed')return false;else{if(uaver=='unknown')return true;var _uav=uaver.split(",");var _rqv=reqver.toString().replace(/\./,",").split(",");for(var i=0;i<3;i++){_uav[i]=parseInt(_uav[i]||0);_rqv[i]=parseInt(_rqv[i]||0);if(_uav[i]<_rqv[i])return false;if(_uav[i]>_rqv[i])return true;}
return true;}};_jm.detectPluginVersion=function(t,fo){if(typeof(t)=='undefined')return false;var _gao=false;var _np=navigator.plugins;if(_np&&_np.length){if(t=='wmedia'&&fo==false)_gao=_jm.detectGeckoAXO();if(_gao==false){_jm.type='npapi';for(_i=0;_i<_np.length;_i++){var _p=_np[_i];var _sl=_jm.plugins[t].description.length;for(_ii=0;_ii<_sl;_ii++){if(_p.name.indexOf(_jm.plugins[t].description[_ii])!=-1){var _n=_p.name;var _d=_p.description;switch(t){case"flash":return _d.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").replace(/(\.)/g,",");case"director":return _d.split('version ')[1].replace(/(\.)/g,",");case"quicktime":return _n.replace(/([a-zA-Z]|\s|-)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").replace(/(\.)/g,",");case"real":return _d.replace(/(\.)/g,",");case"wmedia":return'unknown';default:return'not installed';}}}}}}
if(window.ActiveXObject||_gao==true){_jm.type='axo';for(_i=0;_i<_jm.plugins[t].progID.length;_i++){var _axon=_jm.plugins[t].progID[_i];try{if(_gao==true)_axo=new GeckoActiveXObject(_axon);else _axo=new ActiveXObject(_axon);switch(t){case"flash":var _axov=0;if(_axon=="ShockwaveFlash.ShockwaveFlash.7")_axov=axo.GetVariable("$version");else if("ShockwaveFlash.ShockwaveFlash.6"){_axov="6,0,21,0";_axo.AllowScriptAccess="always";_axov=_axo.GetVariable("$version");}
else if("ShockwaveFlash.ShockwaveFlash.3"){_axov=axo.GetVariable("$version");if(_axov==0)_axov="3,0,18,0";}
else if("ShockwaveFlash.ShockwaveFlash")_axov="2,0,0,11";return _axov.replace(/([a-zA-Z]|\s|-)+/,"").toString();case"director":return _axo.ShockwaveVersion("").replace(/r/,",").replace(/\./g,",");case"quicktime":return _axo.QuickTimeVersion.toString(16).replace(/(\d)/g,"$1,").toString().replace(/\./,",");case"real":return _axo.GetVersionInfo().toString().replace(/(\.)/g,",");case"wmedia":return _axo.versionInfo.toString().replace(/(\.)/g,",");case"acrobat":var _acv=_axon.split(".")[2];if(_acv=="1")_acv=7;return _acv+",0";default:return'not installed';}}
catch(e){}}}};_jm.detectGeckoAXO=function(){var _n=navigator.plugins;if(_n&&_n.length){for(_x=0;_x<_n.length;_x++){if(_n[_x].name.indexOf('ActiveX')!=-1&&window.GeckoActiveXObject)return true;}}
return false;};_jm.getPluginName=function(src){var _arr=src.split("?");_arr=_arr[0];_arr=_arr.split(".");var ext=_arr[(_arr.length-1)];switch(ext){case'ram':return'real';case'rm':return'real';case'swf':return'flash';case'mov':return'quicktime';case'dcr':return'director';case'wmv':return'wmedia';case'asx':return'wmedia';}
return false;};_jm.writeHtml=function(elem,t,soptions,moptions){var _pt=t;if(_pt=='flash'&&typeof(moptions.flashVars)!='undefined'&&moptions.flashVars.indexOf(/&/)==0)moptions.flashVars=moptions.flashVars.substr(1,(moptions.flashVars.length-1));if(_jm.type=='axo'){var _objPar="";for(var key in moptions)
if(typeof moptions[key]!='function'&&key!="height"&&key!="width"&&key!="src"&&(_pt!="flash"||(key!="align"&&key!="base"&&key!="swfliveconnect")))
_objPar+='<param name="'+key+'" value="'+moptions[key]+'">';if(_pt=="flash")_objPar+='<param name="movie" value="'+moptions.src+'">';else if(_pt=="wmedia")_objPar+='<param name="filename" value="'+moptions.src+'">';else _objPar+='<param name="src" value="'+moptions.src+'">';var _objAtt="";if(_pt=="flash"&&typeof(moptions.align)!='undefined')_objAtt+=' align="'+moptions.align+'"';if(_pt=="flash"&&typeof(moptions.base)!='undefined')_objAtt+=' base="'+moptions.base+'"';else if(_pt=="wmedia")_objAtt+=' type="'+_jm.plugins[_pt].mimeType[2]+'"';var _cb="";var _p=window.location.protocol=="https:"?"https:":"http:";if(_jm.plugins[_pt].codeBase!=undefined)_cb=' codebase="'+_p+"//"+_jm.plugins[_pt].codeBase+'"';var _oStr='<object classid="clsid:'+_jm.plugins[_pt].classID+'" '+_objAtt+' width="'+moptions.width+'" height="'+moptions.height+'"'+_cb+'>'+_objPar+'</object>';return _oStr;}
else if(_jm.type=='npapi'){if((soptions.forceObjectTag==true&&_jm.uaHas("gecko"))||_jm.uaHas("xml")){var _obj=$("<object></object>");var _mt=_jm.plugins[_pt].mimeType[1]?_jm.plugins[_pt].mimeType[1]:_jm.plugins[_pt].mimeType[0];$(_obj).attr({type:_mt,data:moptions.src,width:moptions.width,height:moptions.height});var _objPar="";for(var key in moptions){if(typeof moptions[key]!='function'&&key!="height"&&key!="width"&&key!="src"){if(_pt!='real'){var _p=$("<param>");$(_p).attr({name:key,value:moptions[key]});$(_obj).append($(_p));}
else $(_obj).attr(key,moptions[key]);}}
if(_pt=="flash"){var _p=$("<param>");$(_p).attr({name:"movie",value:moptions.src});$(_obj).append($(_p));}
else{var _p=$("<param>");$(_p).attr({name:"src",value:moptions.src});$(_obj).append($(_p));}
return _obj;}
else{var _embAttr='';for(var key in moptions)
if(typeof moptions[key]!='function'&&key!='src')
_embAttr+=key+'="'+moptions[key]+'" ';var _embStr='<embed type="'+_jm.plugins[_pt].mimeType[0]+'" src="'+moptions.src+'" pluginspage="'+_jm.plugins[_pt].pluginsPage+'" '+_embAttr+'></embed>';return _embStr;}}};_jm.getSifrContent=function(elem,moptions,soptions){$('body').addClass('sifr-hasflash');$(elem).addClass('sifr-replaced');moptions.width=parseInt($(elem).offsetWidth-soptions.sifrPaddingLeft-soptions.sifrPaddingRight);moptions.height=$(elem).height()-soptions.sifrPaddingTop-soptions.sifrPaddingBottom;if(isNaN(moptions.width))moptions.width=$(elem).width()-soptions.sifrPaddingLeft-soptions.sifrPaddingRight;if(typeof(moptions.flashVars)=='undefined')jQuery.extend(moptions,{flashVars:''});if(!moptions.flashVars.match(/textcolor/))moptions.flashVars+="&textcolor=#000000";var _ch=$(elem).children();if(_ch.length>0){var content="";var sLinkVars="";var sLinkCnt=0;_ch.each(function(){if(this.nodeName.toLowerCase()=="a"&&this.href!='undefined'){if($(this).attr("target")){sLinkVars+="&sifr_url_"+nLinkCount+"_target="+$(this).attr("target");};content+='<a href="asfunction:_root.launchURL,'+sLinkCnt+'">'+$(this).text()+'</a>';sLinkVars+='&sifr_url_'+sLinkCnt+'='+escapeHex(this.href).replace(/&/g,"%26");sLinkCnt++;}
else content+=$(this).text();});moptions.flashVars+="&txt="+escapeHex(content).replace(/\+/g,"%2B").replace(/&/g,"%26").replace(/\"/g,"%22").normalize()+"&h="+moptions.height+"&w="+moptions.width+sLinkVars;}
else moptions.flashVars+="&txt="+escapeHex(elem.text()).replace(/\+/g,"%2B").replace(/&/g,"%26").replace(/\"/g,"%22").normalize()+"&h="+moptions.height+"&w="+moptions.width;moptions.sifr="true";return moptions;};_jm.uaHas=function(ft){var _u=navigator.userAgent.toLowerCase();switch(ft){case"w3cdom":return(typeof document.getElementById!="undefined"&&typeof document.getElementsByTagName!="undefined"&&(typeof document.createElement!="undefined"||typeof document.createElementNS!="undefined"));case"xml":var _m=document.getElementsByTagName("meta");var _l=_m.length;for(var i=0;i<_l;i++)if(/content-type/i.test(_m[i].getAttribute("http-equiv"))&&/xml/i.test(_m[i].getAttribute("content")))return true;return false;case"ieMac":return/msie/.test(_u)&&!/opera/.test(_u)&&/mac/.test(_u);case"ieWin":return/msie/.test(_u)&&!/opera/.test(_u)&&/win/.test(_u);case"gecko":return/gecko/.test(_u)&&!/applewebkit/.test(_u);case"opera":return/opera/.test(_u);case"safari":return/applewebkit/.test(_u);default:return false;}};_jm.plugins={"flash":{classID:"D27CDB6E-AE6D-11CF-96B8-444553540000",progID:["ShockwaveFlash.ShockwaveFlash.9","ShockwaveFlash.ShockwaveFlash.8.5","ShockwaveFlash.ShockwaveFlash.8","ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash.6","ShockwaveFlash.ShockwaveFlash.5","ShockwaveFlash.ShockwaveFlash.4"],description:["Shockwave Flash"],mimeType:["application/x-shockwave-flash"],pluginsPage:"http://www.macromedia.com/go/getflashplayer",codeBase:"download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"},"quicktime":{classID:"02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",progID:["QuickTimeCheckObject.QuickTimeCheck.1","QuickTime.QuickTime"],description:["QuickTime"],mimeType:["video/quicktime"],pluginsPage:"http://www.apple.com/quicktime/download/",codeBase:"www.apple.com/qtactivex/qtplugin.cab"},"real":{classID:"CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",progID:["RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","rmocx.RealPlayer G2 Control"],description:["RealOne Player","RealPlayer Version"],mimeType:["audio/x-pn-realaudio-plugin"],pluginsPage:"http://www.real.com/freeplayer/?rppr=rnwk"},"wmedia":{progID:["WMPlayer.OCX","MediaPlayer.MediaPlayer.1"],classID:"22D6f312-B0F6-11D0-94AB-0080C74C7E95",description:["Windows Media"],pluginsPage:"http://www.microsoft.com/windows/windowsmedia/",codeBase:"activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab",mimeType:["application/x-mplayer2","video/x-ms-asf","application/x-oleobject"]},"director":{classID:"166B1BCA-3F9C-11CF-8075-444553540000",progID:["SWCtl.SWCtl.11","SWCtl.SWCtl.10","SWCtl.SWCtl.9","SWCtl.SWCtl.8","SWCtl.SWCtl.7","SWCtl.SWCtl.6","SWCtl.SWCtl.5","SWCtl.SWCtl.4","SWCtl.SWCtl"],description:["Shockwave for Director"],pluginsPage:"http://www.macromedia.com/shockwave/download/",codeBase:"download.macromedia.com/pub/shockwave/cabs/director/sw.cab",mimeType:["application/x-director"]}};function escapeHex(sHex){if(_jm.uaHas('ieWin')||_jm.uaHas('ieMac')){return sHex.replace(new RegExp("%\d{0}","g"),"%25");}
return sHex.replace(new RegExp("%(?!\d)","g"),"%25");};String.prototype.normalize=function(){return this.replace(/\s+/g," ");};_jm.cleanupSWFs=function(){if(_jm.uaHas("opera")||!document.all){return;}
var _2d=document.getElementsByTagName("OBJECT");for(var i=0;i<_2d.length;i++){_2d[i].style.display="none";for(var x in _2d[i]){if(typeof _2d[i][x]=="function"){_2d[i][x]=function(){};}}}};var prepUnload=function(){var __flash_unloadHandler=function(){};var __flash_savedUnloadHandler=function(){};if(typeof window.onunload=="function"){var _30=window.onunload;window.onunload=function(){_jm.cleanupSWFs();_30();};}
else window.onunload=_jm.cleanupSWFs;};if(typeof window.onbeforeunload=="function"){var oldBeforeUnload=window.onbeforeunload;window.onbeforeunload=function(e){prepUnload();oldBeforeUnload(e);};}
else window.onbeforeunload=prepUnload;var UFO={expressInstallCallback:function(){var _b=document.getElementsByTagName("body")[0];var _c=document.getElementById("flashXIcon");_b.removeChild(_c);_b.style.setAttribute("overflow","auto");_b.style.setAttribute("height","auto");document.getElementsByTagName("html")[0].style.setAttribute("overflow","auto");document.getElementsByTagName("html")[0].stylesetAttribute("height","auto");}};pj.addCompSel('pjmedia').add_lib(pj.pjmedia={init_frwk:function(){pj.onScanCallThat(pj.getCompSel('pjmedia'),function($e){d=$e.pjCompParams('pjmedia',{sops:{flashXI:true,flashXIsrc:'/scc/jquery/jmedia/XI.swf'},mops:{width:$e.width(),height:$e.height(),quality:'best'}},function(){$a=$('.pjmedia-src',$e);var vsops=$.extend({flashXI:true,flashXIsrc:'/scc/jquery/jmedia/XI.swf'},eval('({'+$a.prop("rev")+'})')),vmops=$.extend({src:$a.attr("href"),width:$e.width(),height:$e.height(),quality:'best'},eval('({'+pj.getRel($a)+'})'));return{old:1,sops:vsops,mops:vmops};});$e.jmedia(d.sops,d.mops);});}});pj.add_lib({init_frwk:function(){pj.onScanCallThat("[data-pjmovecontent]",function($e){var d=$e.pjCompParams('pjmovecontent',{from:$e}),fromDom=$(d.from).get(0),toDom=$(d.to).get(0);$e.removeAttr('data-pjmovecontent');fromDom&&toDom&&toDom.appendChild(fromDom.parentNode.removeChild(fromDom));})}});pj.addCompSel('pjnotation',{elt:'select',olds:'select.pj_notation'}).add_lib(pj.notation={init_frwk:function(){pj.onScanCallThat(pj.getCompSel('pjnotation'),function($e){var d=$e.pjCompParams('pjnotation',{text2:'undefined'}),$text2=$(d.text2),$wraper=$e.wrap('<div class="pj_notation"/>').parent(),data_pjstat=$e.attr('data-pjstats'),_reset=function(){var $s=$('option:not(.pj_default):selected',$e);$('div',$wraper).each(function(i,d){$(this).toggleClass('note_on',i<=$('option:not(.pj_default)',$e).index($s));});$text2.html($s.text());},$cont=$e.closest('dl:has(.pj_notation_moyenne)'),$avg=$('.pj_notation_moyenne',$cont),_avg=$avg.size()?function(){var v,sum=0,nb=0;$(pj.getCompSel('pjnotation'),$cont).each(function(){var $s=$(this);if(v=(1+$('option:not(.pj_default)',$s).index($('option:selected',$s)))){sum+=v;nb++;}});if(nb>0){var avg=Math.round(sum*100/nb),rest=avg%100,pavg=parseFloat($avg.data('avg')||0)*10;if(rest>75){avg=(avg-rest+100)/10;}
else if(rest>25){avg=(avg-rest+50)/10;}
else{avg=(avg-rest)/10}
$avg.removeClass('note_'+(pavg<10?'0':'')+pavg).data('avg',avg/10).addClass('note_'+(avg<10?'0':'')+avg);}}:pj.nop;$e.hide().find('option:not(.pj_default)').each(function(){var $o=$(this),$do=$('<div title="'+$o.text()+'">'+$o.attr('value')+'</div>').mouseover(function(){$text2.html($(this).addClass('note_on').prevAll().addClass('note_on').end().nextAll().removeClass('note_on').end().attr('title'));}).mouseleave(_reset).click(function(){$o.attr('selected','selected');_avg();});if(data_pjstat){$do.attr('data-pjstats',data_pjstat);}
$wraper.append($do);});_reset();_avg();});}});pj.add_lib(pj.onglet={init_frwk:function(){if(location.hash){pj.onglet.getLinksByOngName(location.hash.substr(1).split('&')[0]).pjongletActivate();}
pj.onScanCallThat('[data-pjonglet*="overclick"]',function($e){$e.bind('mouseover',function(){pj.onglet.activate($e);});});pj.onScanCallThat('[data-pjongletdiapo]',function($e){var run=true,wait=null,pause=false,d=$e.pjCompParams('pjongletdiapo',{tpause:5000,tanim:1500}),icur=-1,$as=pj.onglet.getLinks($e.attr('id')).not(':data(pjdata.pjonglet.closer=1)').click(function(){run=false;if(wait){clearInterval(wait);wait=null;}}).each(function(i,a){var $a=$(a);$e.find('.'+$a.pjongletParams().ong).css({position:'absolute',top:'0'});if($a.hasClass('pjonglet-on')){icur=i};});$e.pjSaveCompParams({pjongletdiapo:d});if(-1==icur){$e.find("."+$($as.get(icur=0)).addClass('pjonglet-on').pjongletParams().ong).addClass('pjonglet-open').show();}
$e.css({position:'relative',overflow:'hidden',visibilty:'visible'}).data('ça bouge',false).hover(function(){pause=true},function(){pause=false}).data('fn-next',function(){if(run){wait=setInterval(function(){if(!pause){clearInterval(wait);wait=null;pj.onglet.activate($($as[++icur>=$as.length?icur=0:icur]));}},d.tpause);}}).data('fn-next')();});},getLinks:function(contid){var $o=$('[data-pjonglet]');$o.not(':data(pjdata)').pjongletParams();$o=$o.filter(':data(pjdata.pjonglet.cont='+contid+')');return $o;},getLinksByOngName:function(ong){var $o=$('[data-pjonglet]');$o.not(':data(pjdata)').pjongletParams();$o=$o.filter(':data(pjdata.pjonglet.ong='+ong+')');return $o;},activate:function(elt){$(elt).pjongletActivate()},setUrlOngData:function($a){var url=$a.attr("href"),i=url.indexOf("#");if(-1==i){pj.log.push_ERROR("pj.onglet.setUrlOngData",pj.log.setEltIdentity("href='[url]#onglet' not found for {EltIdentity} ",$a));return false;}
$a.data('url',url.substr(0,i));$a.data('ong',url.substr(i+1));return true;}});$.fn.pjongletParams=function(){var f=null;this.each(function(){var $e=$(this),d=$e.pjCompParams('pjonglet');f=f||d;});return f||{};}
$.fn.pjongletActivate=function(){return this.each(function(){var m='pjongletActivate',$elt=$(this),d=$elt.pjongletParams(),$cont=$("#"+(d.cont||'undefined'));if(0!=$cont.size()&&!$cont.data('ça bouge')){var
$next=$('.'+d.ong,$cont),sli=$cont.is('.pjongletsliceon,.pjonglet-sliceon'),diapo=$cont.is('[data-pjongletdiapo]'),$as=pj.onglet.getLinks(d.cont),aon=$as.filter('.pjonglet-on').pjongletParams().ong,$cur=$cont.find('.'+aon+'.pjonglet-open');function _fnshow(){if(diapo){}else if(sli){$next.slideDown("normal",function(){if(pj.ie6)$next.find('form').show();})}else{$next.show()}};function _fnhide(andShow){if(diapo){}else if(sli){if(pj.ie6){$cur.find('form').hide();}
$cur.slideUp("normal",andShow?_fnshow:pj.nop)}else{$cur.hide().css('display','none');andShow&&_fnshow();}
$cur.removeClass('pjonglet-open');}
if(d.closer&&(!d.ong||$elt.hasClass('pjonglet-on'))){$as.removeClass('pjonglet-on');_fnhide();return;}
$as.removeClass('pjonglet-on').filter(':data(pjdata.pjonglet.ong='+d.ong+')').addClass('pjonglet-on').end()
if(diapo){$next.css("position","absolute");}else if(pj.ie6){$next.css("position");}else{$next.css("position","relative");}
if(d.ajax){$.ajax({url:d.ajax,data:pj.ajaxParam,dataType:"html",error:function(req,res,err){pj.log.push_ERROR(m,pj.log.setEltIdentity("erreur ajax ["+err+"] pour {EltIdentity}",$elt))},success:function(html){$next.html(html).pjScan()}});if(!d.reload){d.ajax=null;}}
$elt.pjSaveCompParams({pjonglet:d});if(d.contentCallback){d.contentCallback.call($elt,d,$cont,$next);}
if($cur.size()&&!$cur.hasClass(d.ong)){if(diapo){var tanim=$cont.pjCompParams('pjongletdiapo').tanim;$cont.data('ça bouge',true);$cur.animate({"left":"-100%"},tanim,function(){$cont.data('ça bouge',false);});$next.css({"left":"100%","display":"block"}).animate({"left":"0%"},{queue:false,duration:tanim,complete:$cont.data('fn-next')});}else{_fnhide(true);}
$cur.removeClass('pjonglet-open');}else{_fnshow();}
$next.addClass('pjonglet-open');}});}
pj.$doc.on('click.pjonglet','[data-pjonglet]',function(e){$(this).pjongletActivate().is('a')&&e.preventDefault();});pj.addCompSel("pjoverslider").add_lib(pj.overslider={init_frwk:function(){var dn='dir.pjoverslider';pj.onScanCallThat(pj.getCompSel("pjoverslider"),function($e){var d=$e.pjCompParams('pjoverslider',{step:3,delay:0.01});$.each(['up','down','left','right'],function(i,v){$(d[v]||'undefined').hover(function(){$e.data(dn,v);(function(){var t=$e.data(dn),fn=arguments.callee;if(t){$e.stop().scrollTo(('up'===t||'left'===t?'-':'+')+'='+d.step+'px',{axis:'up'===t||'down'===t?'y':'x',onAfter:function(){fn.delay(d.delay)}});}})();},function(){$e.stop().data(dn,null)})});});}});;(function(cn){pj.$doc.on('click','[data-'+cn+']',function(e){var domClicked=this,$clicked=$(domClicked),opts=$.extend({},$clicked.pjCompParams(cn)),$all=opts.name?$('[data-'+cn+'*="name:\''+opts.name+'\'"]'):$('[data-'+cn+']').not('[data-'+cn+'*="name:"]'),$dl,$ul=$('<ul/>'),id=cn+pj.now(),ps=[];if($clicked.is('a'))e.preventDefault();opts.popin={klass:'',voile:0,modal:0};opts.carrousel={klass:''};$all.each(function(i,o){var $e=$(o),d=$e.pjCompParams(cn),$li=$('<li/>').append($('<img />').attr('src',d.url||$e.attr('href')));if(d.legend){$li.append($(d.legend).clone(true))}
$ul.append($li);if(o==domClicked){ps.push('start:'+(i+1));}
$.extend(opts.popin,d.popin||{});$.extend(opts.carrousel,d.carrousel||{});});$.each(opts.carrousel,function(k,v){if(v&&k!='start'&&k!='klass'){ps.push(k+":'"+v+"'");}});pj.popin.show.call($dl=$('<dl style="display:none"/>').attr('data-popin',"{dtanchor:'"+id+"',voile:"+opts.popin.voile+",modal:"+opts.popin.modal+"}").append($('<dt/>').addClass(opts.popin.klass).append($('<div class="popin-content-header"><a class="close" name="'+id+'">fermer</a></div>'))).append($('<dd/>').append($ul.addClass('JS_PJ '+opts.carrousel.klass).attr('data-pjcarrousel','{'+ps.join(',')+'}'))).appendTo('body'));$('#pjpopin').bind('beforeremove.popin',function(){$('[data-pjcarrousel]',$(this)).jcarousel('stopAuto');setTimeout(function(){$dl.remove()},100);});});})('pjpopingalery');pj.$doc.on('click','[data-pjreloadimg]',function(e){var $e=$(this);if($e.is('a'))e.preventDefault();$($e.pjCompParams('pjreloadimg').img).each(function(){this.src=pj.urlAddParams(this.src,{_pj:Math.random()*pj.now()});});});pj.$doc.on('click','[data-pjscroll]',function(e){var $e=$(this),d=$e.pjCompParams('pjscroll');if($e.is('a'))e.preventDefault();$(d.what||window).scrollTo($(d.to),{axis:'y'});});pj.addCompSel('pjselectall').add_lib({init_frwk:function(){pj.onScanCallThat(pj.getCompSel('pjselectall'),function($e){var md=$e.pjCompParams('pjselectall',{clon:'pjselectall-selected'},function(){return{old:1,to:pj.getRel($e)}}),$cid=$('#'+md.to),isa=$e.is('a'),isc=$e.is(':checkbox');$cid.find(':checkbox').bind('click change',function(e){var $all=$(':checkbox',$cid),b=$all.filter(':checked').size();$e.toggleClass(md.clon,b>0);if(isc){if(md.checkme){$e.attr('checked',b!=0&&b==$all.size());}else if(!b){$e.attr('checked',false);}}}).first().change();$e.click(function(e){if(isa)e.preventDefault();if(isc){$e.toggleClass(md.clon,$e.is(':checked'));}else{$e.toggleClass(md.clon);}
$cid.delay(10).find(':checkbox').attr('checked',$e.is('.'+md.clon)).change();});});}});pj.$doc.on('click','input[type="text"][data-pjselectonclick],textarea[data-pjselectonclick]',function(e){$(this).select();})
pj.add_lib(pj.tooltip={tempo:500,init_frwk:function(){pj.onScanCallThat("[data-pjtooltip]",function($e){var isout=false,d=$e.pjCompParams('pjtooltip'),$e4pos=d.relpos?$("#"+d.relpos):$e,$dt=null,$tip=null,_hide=function(){if(isout&&$tip){$tip.fadeOut().remove();$tip=null;}},_out=function(){isout=true;if($tip)$tip.animate({"delay":"1"},pj.tooltip.tempo,_hide);},_show=function(){$("#tip").remove();return $tip=$("<div/>").attr('id','tip').css({position:'absolute',overflow:'visible','z-index':9500,'text-align':'left',left:$e4pos.offset().left+"px",top:$e4pos.offset().top+$e4pos.height()+"px"}).append($("<div/>").attr('id','tip-content').hover(function(){isout=false},_out)).prependTo('body').fadeIn();};if(d.dtanchor){$dt=$("a[name="+d.dtanchor+"]");if($dt.size()==0){pj.log.push_ERROR("pj.tooltip","Anchor a[name="+d.dtanchor+"] not found for "+pj.log.eltIdentity($e));return;}else if(($dt=$dt.closest("dt")).size()==0){pj.log.push_ERROR("pj.tooltip","Anchor a[name="+d.dtanchor+"] not in dt element for "+pj.log.eltIdentity($e));return;}}
if(!$dt&&!d.ajax){pj.log.push_ERROR("pj.tooltip","pjtooltip sans contenu "+pj.log.eltIdentity($e));return;}
$e.hover(function(e){if(isout){_hide();isout=false;}
if(d.ajax){var k;_show().addClass("loading").find('#tip-content')[$dt?'pjHtmlDtAnchor':'noop']($dt).end().data('mytip',k=pj.now());$.ajax({type:"GET",url:d.ajax,data:pj.ajaxParam,dataType:"html",success:function(html){if($tip&&k==$tip.data('mytip')){_show().find('#tip-content').html(html).pjScan();}}});}
else{_show().find('#tip-content').pjHtmlDtAnchor($dt);}},_out);});}});;(function(cn){pj.add_lib({init_frwk:function(){pj.onScanCallThat(':password[data-'+cn+']',function($e){var id=$e.attr('id')||$e.data('id'),$itxt,_clear=function(e){var $i=$(this),$ipwd=$i.data(cn+'-pwdinput');if($ipwd){$i.hide().removeAttr('id');$ipwd.attr('id',id);if(''==$i.val()&&$ipwd.data('placeholder-textinput')){$ipwd.trigger('set.placeholder');}else{$ipwd.show()}}},_set=function(e){var $i=$(this);if($i.is(':password')){if($i.is(':focus')||(this.ownerDocument&&this===this.ownerDocument.activeElement)){$i.trigger({type:'blur',pjto:cn});}
if($i.data('placeholder-textinput'))$i.data('placeholder-textinput').hide().removeAttr('id');$i.hide().removeAttr('id').data(cn+'-textinput').attr('id',id).show().focus()}};try{$itxt=$e.clone().attr({type:'text'});}catch(e){var edom=$e.get(0),attrs={},rinlinejQuery=/^jQuery\d+$/;$.each(edom.attributes,function(i,attr){if(attr.specified&&!rinlinejQuery.test(attr.name)){attrs[attr.name]=attr.value;}});attrs.type='text';$itxt=$('<input/>').attr(attrs);}
$itxt.removeAttr('name').data(cn+'-pwdinput',$e).data('id',id).bind('blur.'+cn+' clear.'+cn,_clear).hide().removeAttr('data-'+cn).removeAttr('placeholder').pjScan(true).pjFormCtrl16i(function(){$e.val($itxt.val()).trigger('ctrl16i.pjform').change()});$e.data(cn+'-textinput',$itxt).data('id',id).before($itxt).bind('focus.'+cn+' set.'+cn,_set);if($e.is(':focus'))$e.trigger('set.'+cn);});}});})('pjvisiblepwd');pj.add_lib($.extend(pj.stats,{init_frwk:function(){var te="pj.stats.init_frwk";if(window._pjStatInitEvents){return;}else{pj.stats.oldCompatibilityObjet=function(elt){return'string'==typeof elt?($('<span/>').addClass(elt))[0]:elt;}
window._pjStatLienInfo=function(o){pj.stats.lienInfo.call(pj.stats.oldCompatibilityObjet(o));}}
pj.onScanCallThat(pj.addCompSel('pjstatsxiti_vars',{name:'pjstatsxiti*=vars',klass:0,andGet:1}),function($e){var k,v,dx=$e.pjCompParams('pjstatsxiti');if(dx.vars){$.each(dx.vars,function(k,v){window[k]=v;if('xtpage_context'==k){window.xtpage=(window.xtpage_racine||'')+v;}});}
$e.trigger('click.pjstatsBPO');});pj.stats.havas={d0:pj.now()};if($('#homeAJ').length){var $e=$('#N1_formulaire form:first');$e.attr('id',$e.attr('name'));}
$.each({'#formAccueil':'troupb3','body:not(.PA) #formClassiqueHaut':'bouthp1','#form_numero':'trounum3','#form_nom':'btqpcn3','#formqui,body.PA #formClassiqueHaut':'btpahp3'},function(s,v){$(s).submit(function(e){pj.stats.writeHavasImg(v)});});if(undefined!=eval('window.pjHavasCat')){$('<iframe/>').attr('frameborder','0').height(1).width(1).attr('src','http://fls.doubleclick.net/activityi;src=1730695;type=pj2009;cat='+pjHavasCat+';ord='+(Math.random()*10000000000000)+'?').appendTo('body');}
pj.stats.havas.d1=pj.now();},writeHavasImg:function(c){(new Image()).src="http://ad.fr.doubleclick.net/activity;src=1730695;type=pj2009;cat="+c+";ord="+(Math.random()*10000000)+"?";},callStat:function(sUrl,oDest,sIdImg){pj.stats[location.host.indexOf(domaine)>-1||statPartenaire?"writeImg":"writeIframe"](sUrl,oDest,sIdImg);},lienClicStd:function(){var $e=$(this);if(!$e.pjstatsIsDisabled()){pj.stats.aladin.tagClic({TypeClick:'I',TagClick:$e.pjstatsIdTag()});}},lienInfo:function(e){pj.stats.lienClicStd.call(this);},lienSortie:function(e){pj.stats.lienClicStd.call(this);},aladin:{isDisabled:pj.stats.isAladinDisabled,annonceur:pj.nop,tagClic:function(params){if(!pj.stats.isAladinDisabled()){(new Image()).src=pj.urlAddParams(urlAladin+'clicks',$.extend({IdPage:$.cookie("IdPage")||'',TypeClick:'I',TagClick:''},params,{_pjTs:pj.now()}));}}},aladinAnnonceur:pj.nop}));pj.postScanCallThat('pjstats',function($ctx){var $b=pj.$doc;pj.$doc.off('.pjstats');pj.stats.ecouteClicBPO();pj.stats.ecouteClicAnn();pj.stats.ecouteClicGen();pj.stats.ecouteClicClics();if(!$ctx&&window.xtancre){var h=(location.hash||'').substr(1);if(0==h.indexOf('onglet-')){xtancre=h.split('&')[0];}
pj.onglet.getLinksByOngName(xtancre).trigger({type:'do.pjstatsClics',justFirst:(pj.stats.justFirst=true)});}
if(!$ctx&&window.sccVars&&!pj.stats.isAladinDisabled()){var sv=pj.stats.getStatVars(),xtor=(''+location).toQueryParams(),k,e,p13;if(xtor.xtor){xtor=xtor.xtor;}else{xtor=(location.hash||'').substr(1).toQueryParams();xtor=xtor.xtor||'';}
if(window.Kameleoon){try{p13=[];for(k in Kameleoon.API.experiments){e=Kameleoon.API.experiments[k];p13.push([e.name,e.targeting,e.targeting?(e.registeredVariation.name):'']);}}catch(e){}}
(new Image()).src=pj.urlAddParams(urlAladin+'pageal',{v:'1.0',p1:sccVars.idApplication||'',p2:sccVars.idStatPage||'',p3:sccVars.idRequete||'',p4:sccVars.idPage||'',p5:sccVars.idPagePrec||'',p6:xtor,p7:screen.width+'x'+screen.height,p8:sv.typePage||'',p9:'',p10:window.xtsite||'',p11:window.xtn2||'',p12:document.referrer||'',p13:p13?JSON.stringify(p13):'',c1:sv.cust1||'',c2:sv.cust2||'',c3:sv.cust3||'',c4:sv.cust4||'',_pjTs:pj.now()});}
if(!$ctx&&window._pjstatsVus&&!pj.stats.isAladinDisabled()){var ns='.pjstatsvu',$aMarquerVu=$(),$win=$(window);$.each(window._pjstatsVus,function(sel,opt){if(typeof opt==="string"||!opt){opt={"aladin":(opt||'')};}
$aMarquerVu=$aMarquerVu.add($(sel).data('opt'+ns,opt));});if($aMarquerVu.length){$win.on('scroll'+ns+' init'+ns,function(e){var wt=$win.scrollTop(),wb=wt+$win.height(),$vus=$();$aMarquerVu.filter(':visible').each(function(){var $e=$(this),ep=$e.offset().top;if(wt<=ep&&wb>=ep){$vus=$vus.add($e);}});if($vus.length){$aMarquerVu=$aMarquerVu.not($vus);if(!$aMarquerVu.length){$win.off(ns);}
setTimeout(function(){var p=[],sv=pj.stats.getStatVars();$vus.each(function(){var $e=$(this),d=$e.pjCompParams('pjstats'),o=$e.data('opt'+ns);(o.aladin||''===o.aladin)&&p.push({v:'1.0',p1:d.idRequete||sv.idRequete||'',p2:o.aladin||'',p3:d.pos||'',p4:d.idProduit||'',p5:d.zone||''});o.partenaires&&$.each($.isArray(o.partenaires)?o.partenaires:[o.partenaires],function(){pj.stats.evalScriptParam($e,'(new Image()).src = "'+this+'"');});});p.length&&$.post(urlAladin+'blocVu',$.extend({vus:JSON.stringify(p)},pj.ajaxParam));},100);}}).trigger('init'+ns);}}});pj.init();pj.top(1);})(jQuery,pj);